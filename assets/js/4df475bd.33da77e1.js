"use strict";(self.webpackChunkknowledge_base=self.webpackChunkknowledge_base||[]).push([[1739],{9509:e=>{e.exports=JSON.parse('{"archive":{"blogPosts":[{"id":"correlation","metadata":{"permalink":"/knowledge-base/correlation","source":"@site/blog/wqu-mscfe/2025-11-21-560-financial-markets-m6.md","title":"Correlation","description":"Notes on module 6.","date":"2025-11-21T00:00:00.000Z","tags":[{"inline":false,"label":"Finance","permalink":"/knowledge-base/tags/finance","description":"Financial Concepts and Techniques"}],"readingTime":4.255,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"correlation","title":"Correlation","authors":["hinnytsang"],"tags":["finance"]},"unlisted":false,"nextItem":{"title":"Correlation","permalink":"/knowledge-base/correlation"}},"content":"Notes on module 6.\\n\\n\x3c!-- truncate --\x3e\\n\\n## The Balance Sheet: Leverage and Default\\n\\nThe balance sheet for a person or a company shows their financial position at a specific point in time. It consists of three main components: assets, liabilities, and equity, the relation is given by the fundemental accounting equation:\\n\\n```math\\nAssets = Liabilities + Equity\\n```\\n\\nWhere:\\n\\n- Assets: e.g. cash, house, car, investments, etc.\\n- Liabilities: e.g. mortgage, loans, credit card debt, etc.\\n- Equity: Assets - Liabilities / net worth / owner\'s equity.\\n\\nLet\'s say I have 150k before buying a house, and I buy a house for 500k with a mortgage of 400k. Before, I have cash only.\\n\\n- Assets: 150k(Cash)\\n- Liabilities: 0\\n- Equity: 150k\\n\\nAfter:\\n\\nI have a house worth 500k, a mortgage of 400k, and cash of 150k - 100k = 50k.\\n\\n- Assets: 500k(House) + 50k(Cash) = 550k\\n- Liabilities: 400k(Mortgage)\\n- Equity: 550k - 400k = 150k\\n\\n\\nExamples of elements on a balance sheet for a bank:\\n\\n\\n| element                | class     |\\n| ---------------------- | --------- |\\n| Cash                   | Asset     |\\n| Loan to customer       | Asset     |\\n| Mortgage to customer   | Asset     |\\n| Deposit from customer  | Liability |\\n| Bank Capital           | Equity    |\\n| Capital reserve        | Equity    |\\n| Reserves for Bad Loans | Asset     |\\n\\n\\n### Measuring Leverage with Equity Multiplier\\n\\nThe equity multiplier (EM) is a measure of financial leverage, calculated as:\\n\\n```math\\nEM = \\\\frac{Assets}{Equity}\\n```\\n\\n\\n\\n## Model Failure and Crises\\n\\n### 1. Rent or Own?\\n\\n1. Depends on country of live, UK ~ 44% rent, US ~ 37% rent, but China around 14% rent.\\n\\n2. Depends on individual\'s situation.\\n\\n\\n### 2. Developers and Landlords\\n\\n- Landlords profit by processing real estates.\\n- Developers profit by creating real estates.\\n\\n\\n### 3. The Costs of Development and How to Finance Them\\n\\nReadings [6 Things to Know About How Development Works](https://archive.strongtowns.org/journal/2020/9/15/6-things-to-know-about-development)\\n\\n1. Developer is a broader category than you think.\\n\\n2. The cost of building sets the floor under the price of a brand new home, the cost for a new home includes:\\n   - Profit / ROI\\n   - Finance\\n   - Construction\\n   - Land\\n   - Tax, Title, Insurence\\n   - Fees\\n   Hence, for 2nd hand homes, the price should be lower than brand new homes. (at lease no Profit)\\n\\n3. Even non-profit developers have a floor unless subsidized.\\n\\n4. The rent on new apartments pays the cost of building them, it must cover the following items:\\n    - Operating expenses\\n    - Debt service\\n    - Capital reserves\\n    - A dept coverage raatio.\\n\\n5. The price of land depends heavily on its development potential.\\n\\nThe Developer\'s balance sheet:\\n\\n1. Liabilities\\n  - issue bonds\\n  - take loans from banks, etc.\\n\\n2. Equity\\n  - sell ownership stack by issuing shares.\\n  - REITs (Real Estate Investment Trusts, a company that owns, operates, or finances income-producing real estate.)\\n\\n\\n\\n## The Housing Finance Problem and its Solutions\\n\\n\\nHousing Microfinance (HMF)\\n- Provides small loans to low-income households or individuals who lack access to traditional banking services, enabling them to improve their housing conditions.\\n\\n- What are the main driver of market growth of HMF?\\n  - Rising urbanization and housing demand in developing countries.\\n  - Increasing awareness about HMF services.\\n  - Supportive government policies and initiatives.\\n\\n- What are the main constraints to market growth of HMF?\\n  - Limited access to funding for HMF providers.\\n  - High operational costs and risks associated with lending to low-income borrowers.\\n  - Lack of awareness and understanding of HMF products among potential clients.\\n\\n\\nContracual savings for housing (CSH)\\n\\n- Financial institutions that collect regular savings from individuals and provide them with affordable housing loans.\\n\\n- Difference between open and closed CSH?\\n  - Open CSH: allow members to join and leave freely, providing flexibility.\\n  - Closed CSH: have a fixed membership, often tied to specific organizations or communities.\\n\\n\\n- How CSH minimize credit risk?\\n  - Creditworthiness of members before granting loans.\\n  - Strict repayment schedules and monitoring mechanisms.\\n  - Encouraging savings habits among members.\\n\\n- Main challenges?\\n\\n\\nHousing bonds\\n- Debt securities issued by governments or financial institutions to raise funds for housing projects.\\n\\nMortgage liquidity facilities (MLF)\\n- Financial mechanisms that provide liquidity to mortgage lenders, enabling them to offer more loans to homebuyers.\\n\\n\\n## REITs vs REOCs\\n\\nBoth REITs (Real Estate Investment Trusts) and REOCs (Real Estate Operating Companies):\\n\\n- Primarily own residential real estate.\\n- Derive most of their income from rent or property sale.\\n- Are publicly listed on an exchange.\\n- Eliminate the hassle of actually owning, letting, and managing properties yourself.\\n- Allow even small investors to buy a slice of the income generated by a number of different properties.\\n\\nThe main difference is:\\n\\n| REITs                                                                  | REOCs                                                 |\\n| ---------------------------------------------------------------------- | ----------------------------------------------------- |\\n| Distribute at least 90% of taxable income as dividends to shareholders | Can retain earnings for growth and development        |\\n| Benefit from special tax treatment, avoiding corporate income tax      | Subject to corporate income tax on profits            |\\n| Shareholders pay taxes on dividends received                           | Shareholders pay taxes on dividends and capital gains |"},{"id":"correlation","metadata":{"permalink":"/knowledge-base/correlation","source":"@site/blog/wqu-mscfe/2025-10-19-560-financial-markets-m3.md","title":"Correlation","description":"Notes on module 3.","date":"2025-10-19T00:00:00.000Z","tags":[{"inline":false,"label":"Finance","permalink":"/knowledge-base/tags/finance","description":"Financial Concepts and Techniques"}],"readingTime":1.92,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"correlation","title":"Correlation","authors":["hinnytsang"],"tags":["finance"]},"unlisted":false,"prevItem":{"title":"Correlation","permalink":"/knowledge-base/correlation"},"nextItem":{"title":"Return and Volatility","permalink":"/knowledge-base/return-and-volatility"}},"content":"Notes on module 3.\\n\\n\x3c!-- truncate --\x3e\\n\\n## Readings: Financial Management for Small Businesses.\\n\\n- [link](https://openbooks.lib.msu.edu/financialmanagement/)\\n\\n\\n## Portfolio Return\\n\\n```math\\nr_P = \\\\frac{\\\\sum_i^N q_i p_i r_i}{\\\\sum_i^N q_i p_i}\\n```\\n\\nWhere:\\n- \\\\(r_P\\\\): portfolio return\\n- \\\\(N\\\\): number of assets in portfolio\\n- \\\\(q_i\\\\): quantity of asset \\\\(i\\\\)\\n- \\\\(p_i\\\\): price of asset \\\\(i\\\\)\\n- \\\\(r_i\\\\): return of asset \\\\(i\\\\)\\n\\n\\n## Portfolio Variance and Standard Deviation\\n\\n```math\\n\\\\sigma_P^2 = \\\\sum_i^N w_i^2 \\\\sigma_i^2 + \\\\sum_i^N \\\\sum_{j \\\\neq i}^N w_i w_j \\\\sigma_i \\\\sigma_j \\\\rho_{ij}\\n```\\n\\nWhere:\\n- \\\\(\\\\sigma_P^2\\\\): portfolio variance\\n- \\\\(N\\\\): number of assets in portfolio\\n- \\\\(w_i\\\\): weight of asset \\\\(i\\\\) in portfolio\\n- \\\\(\\\\sigma_i\\\\): standard deviation of asset \\\\(i\\\\)\\n- \\\\(\\\\rho_{ij}\\\\): correlation coefficient between asset \\\\(i\\\\) and asset \\\\(j\\\\)\\n\\n\\n## Coefficient of Variation\\n\\n```math\\nCV_P = \\\\frac{\\\\sigma_P}{r_P}\\n```\\n\\n\\n## Sharpe Ratio\\n\\n```math\\nS_P = \\\\frac{r_P - r_f}{\\\\sigma_P}\\n```\\n\\nWhere:\\n- \\\\(S_P\\\\): Sharpe ratio of portfolio\\n- \\\\(r_f\\\\): risk-free rate\\n- \\\\(r_P\\\\): portfolio return\\n\\n\\n## Variation Reduction\\n\\nFor 2 asset with correlation $\\\\rho$, the variation reduction is defined by the drop of variation from a zero correlation portfolio to the actual portfolio:\\n\\n```math\\nVR = 2 w_1 w_2 \\\\sigma_1 \\\\sigma_2 (1 - \\\\rho)\\n```\\n\\nHence if $\\\\rho$ is smaller, the variation reduction is larger.\\n\\n## Measurement of correlation\\n\\n### 1. Pearson Correlation Coefficient\\n\\n\\nMeasure linear correlation between two variables $X$ and $Y$:\\n\\n```math\\n\\\\rho_{X,Y} = \\\\frac{cov(X,Y)}{\\\\sigma_X \\\\sigma_Y}\\n```\\n\\n### 2. Spearman\'s Rank Correlation Coefficient\\n\\nMeasure monotonic correlation between two variables $X$ and $Y$.\\n\\nDenote\\n\\n```math\\nd_i = rank(X_i) - rank(Y_i)\\n```\\n\\nAnd\\n\\n```math\\nd^2 = \\\\sum_{i=1}^{n} d_i^2\\n```\\n\\nThen the Spearman\'s rank correlation coefficient is given by:\\n\\n\\n```math\\n\\\\rho_{X,Y} = 1 - \\\\frac{6 \\\\sum d_i^2}{n(n^2 - 1)}\\n```\\n\\nWhere:\\n- $d_i$ is the difference between the ranks of corresponding values of $X$ and $Y$.\\n- $n$ is the number of observations.\\n\\n\\n### 3. Kendall\'s Tau Coefficient\\n\\nMeasure ordinal association between two variables $X$ and $Y$.\\n\\nBelow is a example code to compute Kendall\'s Tau Coefficient:\\n\\n\\n\\n\\n## Exchange-Traded Funds (ETFs)\\n\\n\\n- Reading [Can Cities Be Publicly Traded?](https://blogs.worldbank.org/psd/can-cities-be-publicly-traded)\\n\\n- Reading [Exchange traded funds (ETFs).](https://www.khanacademy.org/economics-finance-domain/core-finance/investment-vehicles-tutorial/mutual-funds/v/exchange-traded-funds-etfs)\\n\\n\\n- Why ETFs? The main idea is to diversify your investment.\\n\\n\\n- Net asset value (NAV) = $\\\\frac{Assets - Liabilities}{# of shares}$\\n\\n\\n### Disadvantages of ETFs\\n\\n1. Commission.\\n2. Operating expenses.\\n3. Lack of diversification.\\n4. Effect on stocks, volatility around index rebalancing."},{"id":"return-and-volatility","metadata":{"permalink":"/knowledge-base/return-and-volatility","source":"@site/blog/wqu-mscfe/2025-10-15-560-financial-markets-m2.md","title":"Return and Volatility","description":"Notes on module 2.","date":"2025-10-15T00:00:00.000Z","tags":[{"inline":false,"label":"Finance","permalink":"/knowledge-base/tags/finance","description":"Financial Concepts and Techniques"}],"readingTime":3.42,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"return-and-volatility","title":"Return and Volatility","authors":["hinnytsang"],"tags":["finance"]},"unlisted":false,"prevItem":{"title":"Correlation","permalink":"/knowledge-base/correlation"},"nextItem":{"title":"Notes on Rust","permalink":"/knowledge-base/rusty"}},"content":"Notes on module 2.\\n\\n\x3c!-- truncate --\x3e\\n\\n## Readings: Money and Debt: The Public Role of Banks\\n\\n- [Link](https://link.springer.com/book/10.1007/978-3-030-70250-2)\\n\\n\\n- Debates after financial crisis (2007-09) about fundemental reform of the financial-monetary system.\\n- Debt and money are scant attention in economics before crisis.\\n- Prosoal for an alternative system:\\n  - Most money is not created by gov or central banks, but by private banks through frant loans.\\n  - Money is destroyed when loans are repaid.\\n  - Creation of money is linked to creation of debt!\\n\\n### What is Money?\\n\\n- Agreement between people, a social construct.\\n- Origins?\\n  - Inefficiencies of barter trade?\\n  - Debt relationship, when promissory notes dissociate from issuer and recipient?\\n  - Taxes collected by state and religion authorities?\\n- Economics focus on functions of money:\\n  - mean of payment\\n  - store of value\\n  - accounting unit\\n  - value stability -> mean of saving\\n  - liquid that other assets\\n- Money aggregates:\\n  - M0: cash in circulation\\n  - M1: M0 + demand deposits\\n  - M2: M1 + short-term deposits\\n  - M3: M2 + long-term deposits, money market funds, repurchase agreements\\n\\n### What is Debt?\\n- Enables the borrower to anticipate future income.\\n\\n### The important of Trust\\n\\n\\n### The Dynamism of the Financial Monetary System\\n\\n## Introducing Stocks and Cryptocurrencies\\n\\n- fractional ownership in a corporation: stockholder / shareholder.\\n- stocks = equities\\n- Assets = liabilities (borrowing debts) + equity\\n\\nTypes:\\n- Value stock: remains stable over time\\n- Growth stocks.\\n- Income stock, offer regular and steady income\\n- Dividend aristocrats, just companies in S&P 500 that increased their dividends annually for the nearest 25 yeats.\\n\\n\\nMarkets:\\n- Primary Market, IPO (initial public offering)\\n- Secondary Market, exchanges.\\n\\nBenefits of Stock\\n1. Capitial appreciation (\u8cc7\u672c\u589e\u503c), (increased in value)\\n2.  Dividend patment\\n3. Voting rights\\n4. Ease of Trading\\n5. Extra income through securities lending\\n6. Centralized depositories\\n\\n\\n\\nRaise capital for company\\n1. Issue bonds\\n2. Issue stocks\\n\\n\\nDisadvantages\\n- realized loss\\n- dividend may not occur\\n- Activist investor, buy significant shares, imporve performance or quit.\\n\\n\\nValue a stock\\n1. Discount Cash Flow model (DCF), need to know the company very well.\\n2. Dividend discount models (DDM), e.g. GGM\\n\\n\\n### Gordon Growth Model (GGM)\\n\\n- special DDM\\n- Stocks present day price is worth the sum of all it futures dvd when discounted back to its present value (Fair value)\\n\\n- Two input\\n  - Dvd $D_1$ and dvd growth rate $g$\\n  - Discount factor $k$\\n\\nValue of the stock is thus:\\n```math\\nP_0 = \\\\frac{D_1}{k-g}\\n```\\n\\nWe may calculate the expected dvd by current dvd $D_0$ and growth rate $g$:\\n\\n```math\\nD_1 = D_0 (1+g)\\n```\\n\\nLimitations\\n- only for companies that pay dvd\\n- only for companies with stable growth rate\\n- assume company exist forever\\n- ignore external factors\\n\\n\\n### Multistage Gordon Growth Model (mGGM)\\n\\nAllow fast growth and a period of stable growth, requires multiple inputs:\\n\\n1. current dvd $D_0$, or expected dvd $D_1$\\n2. fast gwoth rate $g_H$\\n3. Number of years of fast growth period $n$\\n4. stable growth rate $g_L$\\n5. cost of equity capital $k$\\n\\nValue of stock is thus:\\n```math\\nP_0 = \\\\sum_{t=1}^{n} \\\\frac{D_0 (1+g_H)^t}{(1+k)^t} + \\\\frac{D_0 (1+g_H)^n (1+g_L)}{(k-g_L)(1+k)^n}\\n```\\n\\n- Noted that the model can extend to more than two stages.\\n\\n### Multistage Gordon Growth Model with Linearly  Declining Growth Rate (H model)\\n\\nSame as mGGM, but $g_H$ stablizes linearly to $g_L$ over $H$ years.\\n\\n1. 1 period of high growth rate $g_H$\\n2. $H$ periods of linearly declining growth rate to $g_L$\\n3. stable growth rate $g_L$, from $H+1$.\\n\\n\\n### Stock vs Bonds\\n\\n\\n## An Analysis of Bitcoin\u2019s Price Dynamics\\n\\nReading [link](https://www.mdpi.com/1911-8074/11/4/63)\\n\\n\\n\\n## There\'s More Than Meets the Eye: Looking at Art as an Alternative Investment\\n\\nAuthor: Levenkron, Hannah (2011)\\n\\nThesis: Abstract of [link](https://etd.library.emory.edu/concern/etds/z316q178t?locale=en)\\n\\nSummary:\\n- Art is a highest return asset in 1960-2010 period\\n- Annual return 12%, but low sharpe ratio and high std, very risky.\\n- beta of 0.79, correlation of 13.9%, hence not attractive alternative.\\n- Autoregression show art leads S&P 500 and recover faster, probably it is a group predictor?."},{"id":"rusty","metadata":{"permalink":"/knowledge-base/rusty","source":"@site/blog/2025-10-14-rusty.md","title":"Notes on Rust","description":"Some notes for the rust programming language.","date":"2025-10-14T00:00:00.000Z","tags":[{"inline":true,"label":"rust","permalink":"/knowledge-base/tags/rust"},{"inline":false,"label":"Computer Science","permalink":"/knowledge-base/tags/computer-science","description":"Computer Science Concepts and Techniques"}],"readingTime":3.87,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"rusty","title":"Notes on Rust","authors":["hinnytsang"],"tags":["rust","computer-science"]},"unlisted":false,"prevItem":{"title":"Return and Volatility","permalink":"/knowledge-base/return-and-volatility"},"nextItem":{"title":"Operating Systems","permalink":"/knowledge-base/operating-systems"}},"content":"Some notes for the rust programming language.\\n\\n\x3c!-- truncate --\x3e\\n\\n## Borrow Checker\\n\\n- Ownership rules:\\n  1. Each value has one owner.\\n  2. There can only be one owner at a time.\\n  3. References will be dropped when go out of scope.\\n  4. The checker evaluates at compile time.\\n\\n- References and Borrowing:\\n  - At any given time, you can have either\\n  - 1 *mutable* reference, or\\n  - any number of *immutable* references.\\n\\n\\n## Lifetimes\\n\\nThe three rules\\n\\n1. Compiler assigns a lifetime parameter to each parameter that is a reference.\\n2. If there is exactly one input lifetime parameter, that lifetime is assigned to all output lifetime parameters.\\n3. If `&self` or `&mut self` is one of the input lifetime parameters, the lifetime of `self` is assigned to all output lifetime parameters.\\n\\n\\n- `\'static`: Static Lifetime denotes that the reference can live for the entire duration of the program.\\n\\n## Tests\\n\\nShould know:\\n\\n- `#[cfg(test)]`: module only compiled when running tests\\n- `#[test]`: function is a test function\\n- `cargo test`: run testsj\\n    - `cargo test -- --test-threads=1` to run tests in single thread\\n    - `cargo test <test_name>` to run specific test\\n    - `cargo test -- --show-output` to show output of passing tests\\n    - `cargo test -- --ignored` to run ignored tests\\n- `assert!`, `assert_eq!`, `assert_ne!`: macros to check if conditions are met\\n- `#[should_panic]`: test should panic to pass, e.g.\\n    ```rust\\n    #[test]\\n    #[should_panic] // Or #[should_panic(expected = \\"divide by zero\\")] to check panic message\\n    fn test_divide_by_zero() {\\n        let _ = 1 / 0;\\n    }\\n    ```\\n- `Result<T, E>`: test can return a Result type instead of using assert macros, but can\'t use with `#[should_panic]`.\\n- `ignore` attribute to ignore specific tests, use after `#[test]`\\n\\n\\n## Closure\\n\\nClosure will automically implment 1, 2, or all of the following traits:\\n\\n- `Fn`: closure only borrows values from the environment immutably\\n- `FnMut`: closure borrows values from the environment mutably\\n- `FnOnce`: closure takes ownership of values from the environment (`move` keyword)\\n\\n\\n## Smart Pointers\\n\\n- `Box<T>`: for heap allocation, single ownership.\\n- `Rc<T>`: for shared ownership, reference counting, single-threaded.\\n- `RefCell<T>`: allows mutable borrows checked at runtime, even if `RefCell<T>` is immutable, single-threaded.\\n    - `Rc<RefCell<T>>`: shared ownership with interior mutability, single-threaded!\\n- `Weak<T>`: non-owning reference to `Rc<T>`, prevents reference cycles, created using `Rc::downgrade(&rc)`.\\n\\n## Interior Mutability\\n\\nRust enforces borrowing rules at compile time. While it may reject safe code that violates these rules, interior mutability is a way to check these rules at runtime.\\n\\n\\n## Concurrency\\n\\n- `Arc<T>`: Atomic Reference Counted, thread-safe version of `Rc<T>`.\\n- `Mutex<T>`: Mutual Exclusion, provides interior mutability with locking mechanism for thread safety.\\n- `RwLock<T>`: Read-Write Lock, allows multiple readers or one writer at a time, useful for read-heavy scenarios.\\n\\nThreads can be spawned using `std::thread::spawn` and can be joined using the `join` method on the thread handle.\\n\\n### Send and Sync Traits\\n\\n- `Send`: Transfer ownership to another thread.\\n- `Sync`: Allow references to be shared between multiple threads.\\n\\n### Async tasks\\n\\nThe rust book introduced `trpl` library for async programming, below are some common uses:\\n\\n- `trpl::spawn_task(future)`: spawn a new async task.\\n- `trpl::join(futures, future2)`: wait for two futures to complete.\\n- `trpl::join!(...futures)`: wait for multiple futures to complete.\\n- `trpl::race(future1, futures2)`: wait for the first future to complete.\\n- `trpl::channel`: create a channel for communication between tasks (mpsc, async).\\n\\n- Streams:\\n  - `trpl::stream_from_iter(iter)`: create a stream from an iterator.\\n  - `trpl::ReceiverStream(rx)`: create a stream from a receiver.\\n\\n\\nCreate futures\\n```rust\\nlet my_future = async {\\n    // async code here\\n};\\n\\nlet my_future_with_move = async move {\\n    // async code here\\n};\\n\\nmy_future.await;\\n```\\n\\n## Pin for futures\\n\\nUnlike other types, futures may be self-referential, meaning they can contain references to themselves. This can lead to issues when the future is moved in memory, as the references may become invalid.\\n\\nTo address this, Rust provides the `Pin` type, which prevents a value from being moved once it has been pinned. This is particularly useful for futures, as it ensures that the self-referential parts of the future remain valid for the duration of its execution.\\n\\n`Unpin` and `!Unpin`:\\n\\nBy default, most types in Rust implement the `Unpin` trait, which means they can be safely moved in memory. However, some types, such as certain futures or self-referential structs, do not implement `Unpin` and are considered `!Unpin`. These types must be pinned to ensure their memory location remains stable.\\n\\nWhen working with futures that are `!Unpin`, you typically use `Pin<Box<dyn Future<Output = T>>>` or `Pin<&mut dyn Future<Output = T>>` to pin them in place. This ensures that the future can be safely polled without the risk of invalidating any self-references."},{"id":"operating-systems","metadata":{"permalink":"/knowledge-base/operating-systems","source":"@site/blog/2025-10-01-operating-systems.md","title":"Operating Systems","description":"Notes on CMU 213/513 Introduction to Computer Systems.","date":"2025-10-01T00:00:00.000Z","tags":[{"inline":false,"label":"C++","permalink":"/knowledge-base/tags/cpp","description":"C++ Programming Language"},{"inline":false,"label":"Computer Science","permalink":"/knowledge-base/tags/computer-science","description":"Computer Science Concepts and Techniques"}],"readingTime":9.4,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"operating-systems","title":"Operating Systems","authors":["hinnytsang"],"tags":["cpp","computer-science"]},"unlisted":false,"prevItem":{"title":"Notes on Rust","permalink":"/knowledge-base/rusty"},"nextItem":{"title":"Networkings","permalink":"/knowledge-base/networkings"}},"content":"Notes on CMU 213/513 Introduction to Computer Systems.\\n\\nCourse link: [https://www.cs.cmu.edu/~213/](https://www.cs.cmu.edu/~213/).\\n\\n\x3c!-- truncate --\x3e\\n\\n# Representing and Manipulating Information\\n\\n## X86-64 Registers\\n\\n| Register | Description                                   | 32-bit Equivalent |\\n| -------- | --------------------------------------------- | ----------------- |\\n| %rax     | Accumulator for operands and results data     | %eax              |\\n| %rbx     | Pointer to data in the data segment           | %ebx              |\\n| %rcx     | Counter for string and loop operations        | %ecx              |\\n| %rdx     | I/O pointer                                   | %edx              |\\n| %rdi     | Pointer to first data in the segment (memory) | %edi              |\\n| %rsi     | Pointer to last data in the segment (memory)  | %esi              |\\n| %rbp     | Pointer to the base of the *stack*            | %ebp              |\\n| %rsp     | Pointer to the top of the *stack*             | %esp              |\\n| %r8-%r15 | Additional general-purpose registers          | %r8d-%r15d        |\\n| %rip     | Instruction pointer (Programm counter)        | %eip              |\\n\\n## Common Instructions\\n\\n1. Move Data\\n\\n   - `mov dest, src`: Move data from `src` to `dest`.\\n   - Operand Types\\n      - Immediate: Constant value (e.g., `$5`, `$0xFF`), start with `$`.\\n      - Register: Value stored in a register (e.g., `%rax`, `%r13`).\\n      - Memory: Value stored in memory (e.g., `[RAX]`, `[RSP+8]`).\\n      - Rules 1: No way to move directly from memory to memory.\\n      - Rules 2: No way to move anything to immediate.\\n\\n  - `mov (%rcx),%rax` ; Move the 8 bytes at address in rcx to rax\\n  - `mov $0x12345678,%rax` ; Move the immediate value 0x12345678 to rax\\n  - `mov %rax,%rbx` ; Move the value in rax to rbx\\n  - `mov %rax,(%rcx)` ; Move the value in rax to the address in rcx\\n\\n2. `leaq`: Load effective address\\n\\n   - `leaq dest, src`: Load the address of `src` into `dest`.\\n   - Example: `leaq 8(%rcx), %rax` ; Load the address (rcx + 8) into rax\\n\\n3. Arithmetic and Logic Instructions\\n\\n  - `add, sub, imul, xor, and, or` etc.\\n  - Example: `add %rbx, %rax` ; rax = rax + rbx\\n\\n  - Shift and logical shift:\\n    - `sal` or `shl`: Shift left (multiply by 2)\\n    - `sar`: Shift right (divide by 2, signed, arithmetic)\\n    - `shr`: Logical shift right (divide by 2, unsigned)\\n    - Example: `shl $3, %rax` ; rax = rax * 8\\n\\n4. Jumping\\n  - `jmp label`: Unconditional jump to `label`.\\n  - Conditional jumps based on flags:\\n    - `je` (jump if equal, ZF=1)\\n    - `jne` (jump if not equal, ZF=0)\\n    - `js` (jump if sign, SF=1)\\n    - `jns` (jump if not sign, SF=0)\\n    - `jl` (jump if less, SF != OF)\\n    - `jle` (jump if less or equal, ZF=1 or SF != OF)\\n    - `jg` (jump if greater, ZF=0 and SF == OF)\\n    - `jge` (jump if greater or equal, SF == OF)\\n  - Example: `je label` ; Jump to label if the zero flag is set\\n\\n## Address computation\\n\\nLet say %rdx = 0xf000 and %rcx = 0x0100\\n\\nExpressions:\\n\\n- `0x8(%rdx)`: Address = 0xf000 + 0x8 = 0xf008\\n- `(%rdx,%rcx)`: Address = 0xf000 + 0x0100 = 0xf100\\n- `(%rdx,%rcx,4)`: Address = 0xf000 + 0x0100 * 4 = 0xf400\\n- `0x10(,%rdx, 2)`: Address = 0x10 + 0xf000 * 2 = 0x1e010\\n- `0x20(%rdx,%rcx,8)`: Address = 0x20 + 0xf000 + 0x0100 * 8 = 0xf820\\n\\n\\n## Processor states\\n\\n- Temporary values (%rax, %rbx, etc.)\\n- Location of runtime stack (i.e., %rsp)\\n- Location of current code (i.e., %rip)\\n- Stateus of recent tests (CF, ZF, SF, OF, etc.)\\n  - Carry Flag (CF): Set if an operation generates a carry.\\n  - Zero Flag (ZF): Set if the result of an operation is zero.\\n  - Sign Flag (SF): Set if the result of an operation is negative.\\n  - Overflow Flag (OF): Set if an operation results in a signed overflow.\\n  - Implicitly set by arithmetic and logical instructions. (e.g., `add`, `sub`, `cmp`)\\n  - Not affected by data movement instructions (e.g., `mov`, `lea`).\\n  - Explicity set by `cmp` instruction.\\n    - Let say `cmpq b, a`, like `a-b` without setting destination\\n      - CF is set if a < b, ZF is set if a == b, SF is set if a < b (signed), OF is set if overflow occurs (signed).\\n\\n## Conditional Move Instructions\\n\\n`cmoveX dest, src`: Move `src` to `dest` if condition X is met.\\n\\n- X can be:\\n  - `e`: equal (ZF=1)\\n  - `ne`: not equal (ZF=0)\\n  - `l`: less (SF != OF)\\n  - `le`: less or equal (ZF=1 or SF != OF)\\n  - `g`: greater (ZF=0 and SF == OF)\\n  - `ge`: greater or equal (SF == OF)\\n  - `s`: sign (SF=1)\\n  - `ns`: not sign (SF=0)\\n\\n- Example:\\n\\n    ```assembly\\n    absdiff:\\n      movq %rdi, %rax      # rax = a\\n      subq %rsi, %rax      # rax = a - b\\n      movq %rsi, %rdx      # rdx = b\\n      subq %rdi, %rdx      # rdx = b - a\\n      cmovle %rdx, %rax    # if b - a > 0, rax = a\\n      ret\\n    ```\\n\\n\\n1. Branching can be expensive due to pipeline stalls.\\n\\n2. Conditional move instructions can help avoid branches.\\n\\n3. 40 cycles for a mispredicted branch vs. 1 cycle for a conditional move.\\n\\n4. Bad cases:\\n    1. Expensive calculation, e.g., `val = t()? hard1(): hard2();`.\\n    2. Risky computations, e.g., `val = p? *p: 0;`, as both values are computed.\\n    3. With side effects, e.g., `val = (p > 0) ? p *= 7 : p += 3;`, as both values are computed and `p` is incremented.\\n\\n## Switch\\n\\n1. Implemented with a jump table for dense cases.\\n\\n    let say\\n\\n    ```cpp\\n\\n    switch(x) {\\n      case val_0:\\n        block_0;\\n      ...etc\\n    }\\n    ```\\n    The assembly code:\\n\\n    ```assembly\\n    cmpl $val_n, %eax\\n    ja   default_case           # if x > val_n, jump to default_case (jump above)\\n    jmp  *.L4(,%rax,8)  # jump to the address in jump_table + x * 8\\n\\n    # jump_table:\\n    .section .rodata\\n      .align 8\\n    .L4:\\n      .quad case_0\\n      .quad case_1\\n      ...\\n      .quad case_n\\n    ```\\n\\n2. Jump table is an array of addresses of the case blocks!!\\n\\n\\n# Procedures\\n\\n\\nMechanisms:\\n\\n1. Passing control.\\n2. Passing Data.\\n3. Memory management.\\n4. Mechanism all implemented with machine instructions.\\n5. * x86-64 implementation of a procedure uses only those mechanisms required.\\n\\n\\n## x86-64 Stack\\n\\n- Region of memory managed with stack discipline (LIFO).\\n- Grows toward lower addresses.\\n- Register %rsp points to the top of the stack.\\n\\n- `pushq src`: Decrement %rsp by 8, then store `src` at the address in %rsp.\\n- `popq dest`: Load the value at the address in %rsp into `dest`, then increment %rsp by 8. (The original value is still in memory but not in the stack!)\\n\\n## Control Flow\\n\\n1. Call instruction\\n\\n   - `call label`: Push the address of the next instruction (return address) onto the stack, then jump to `label`.\\n   - Example: `call foo` ; Call the procedure `foo`.\\n\\n2. Return instruction\\n    - `ret`: Pop the return address from the stack and jump to that address.\\n    - Example: `ret` ; Return from the current procedure.\\n\\n\\n3. Stack Frame\\n\\n  - Every new function call creates a new stack frame.\\n  - Stack frame contains:\\n    - Return address\\n    - Base register (%rbp)\\n    - Stack register (%rsp)\\n\\n  - Recursive functions create multiple stack frames, probably leading to stack overflow!\\n\\n  - Caller frame vs. Callee frame (Current stack  frame)\\n    - Caller frame: The stack frame of the function that calls another function.\\n    - Callee frame: The stack frame of the function that is called.\\n\\n## Register Saving Convention\\n\\n- Caller-saved registers: %rax, %rcx, %rdx, %rsi, %rdi, %r8-%r11\\n  - Caller must save and restore if it wants to preserve their values across a function call.\\n  - Callee-saved registers: %rbx, %rbp, %r12-%r15\\n      - Callee must save and restore if it uses them.\\n\\n\\n## x86-64 Linux Memory Layout\\n\\n1. Stack\\n   - Runtime stack (8MB limit), check by `limit` command!v\\n   - E.g. local variables\\n\\n2. Heap\\n    - Dynamically allocated memory (e.g., `malloc`, `new`)\\n\\n3. Data\\n  - Statically allocated data\\n  - E.g. global variables, `static` variables\\n\\n4. Text / Shared Library\\n  - Executable machine instructions\\n  - Readonly.\\n\\n```mermaid\\ngraph TD\\n    subgraph Stack\\n        direction TB\\n        StackTop[High Address]\\n        StackBottom[Low Address]\\n    end\\n    subgraph Heap\\n        direction TB\\n        HeapTop[High Address]\\n        HeapBottom[Low Address]\\n    end\\n    subgraph Data\\n        direction TB\\n        DataTop[High Address]\\n        DataBottom[Low Address]\\n    end\\n    subgraph Text\\n        direction TB\\n        TextTop[High Address]\\n        TextBottom[Low Address]\\n    end\\n\\n    StackTop --\x3e StackBottom\\n    StackBottom --\x3e HeapTop\\n    HeapTop --\x3e HeapBottom\\n    HeapBottom --\x3e DataTop\\n    DataTop --\x3e DataBottom\\n    DataBottom --\x3e TextTop\\n    TextTop --\x3e TextBottom\\n```\\n\\n## Performance Optimization\\n\\n1. Minimize procedure calls\\n   - Inline small functions.\\n   - Use macros for very small functions.\\n\\n2. Minimize register saving\\n    - Avoid using callee-saved registers in leaf functions.\\n\\n3. Shift instead of multiply or divide\\n  - Multiply usually need 3 cycles, shift only 1 cycle.\\n  - Addition is also 1 cycle.\\n\\n4. AVX2 / SIMD (Vectorization)\\n  - Single Instruction Multiple Data\\n  - Process multiple data with a single instruction.\\n  - E.g., process 8 integers (32-bit) or 4 doubles (64-bit) in parallel.\\n\\n5. Branches\\n  - Avoid branches when possible.\\n  - Use conditional move instructions to avoid branches.\\n  - Branch prediction: CPU predicts the outcome of a branch to keep the pipeline full.\\n   - Branch Misprediction Recover Penalty: 20-40 cycles.\\n   - Can be a major performance bottleneck.\\n\\n## Summary\\n\\nAssembler Control\\n\\n- Conditional jump\\n- Conditional move\\n- Indirect jump (jump table)\\n\\n\\n\\n# Memory\\n\\n- MMU (Mmory-management unit), a hardware device that maps virtual addresses to physical addresses.\\n- PTE (Page Table Entry), a data structure used by the MMU to store the mapping between virtual and physical addresses. (L1, L2 cache in the MMU).\\n- PTA (Page Table Address), the address of the page table in memory.\\n- PPN (Physical Page Number), the number of a physical page.\\n- VPN (Virtual Page Number), the number of a virtual page.\\n- VPO (Virtual Page Offset), the offset within a virtual page.\\n- PPO (Physical Page Offset), the offset within a physical page.\\n\\nSimple Memory System example, TLB(Translation Lookaside Buffer):\\n\\nAddressing\\n  - 16 bits vertual address space\\n  - 12 bits physical address space\\n  - 64 kB vertual memory\\n\\n\\n## Memory Mapping\\n\\nVM areas initialized by associating them with disk objects.\\n\\n\\n- Virtual Address = VPN * Page Size + VPO\\n- Physical Address = PPN * Page Size + PPO\\n- Page Size = 2^n bytes, n is the number of bits for the page offset\\n\\nSometime different process will access the same physical memory, e.g., shared libraries.\\n\\nCopy-on-write (COW) Objects: Steps\\n\\n1. Create a new VM area for the new process.\\n2. Map the new VM area to the same disk object as the original process.\\n3. Mark the new VM area as read-only.\\n4. When either process tries to write to the shared page, a page fault occurs.\\n5. The OS allocates a new physical page, copies the contents of the original page to\\n    the new page, and updates the page table to map the virtual address to the new physical page.\\n6. The write operation is then retried, and it succeeds on the new page.\\n\\n## Dynamic Memory Allocation\\n\\n\\nKeep Track of Free Blocks\\n1. Implicit free list\\n  - link all blocks by length\\n  - for each block, need both size and allocation status.\\n    - Could store this information in two words: wasteful.\\n    - standard trick, use the low-order bit of the size word to indicate allocation status.\\n\\n2. Explicit free list\\n  - Link all \\"free\\" blocks\\n3. Segregated free list\\n  - Different free lists for different size classes\\n4. Blocks sorted by size\\n  - Used balanced tree (red-black tree)."},{"id":"networkings","metadata":{"permalink":"/knowledge-base/networkings","source":"@site/blog/2025-09-27-networkings.md","title":"Networkings","description":"Notes on Networkings, OSI model, TCP/IP, UDP, Sockets, etc.","date":"2025-09-27T00:00:00.000Z","tags":[{"inline":false,"label":"C++","permalink":"/knowledge-base/tags/cpp","description":"C++ Programming Language"},{"inline":false,"label":"Computer Science","permalink":"/knowledge-base/tags/computer-science","description":"Computer Science Concepts and Techniques"}],"readingTime":4.12,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"networkings","title":"Networkings","authors":["hinnytsang"],"tags":["cpp","computer-science"]},"unlisted":false,"prevItem":{"title":"Operating Systems","permalink":"/knowledge-base/operating-systems"},"nextItem":{"title":"Crypto Catchup","permalink":"/knowledge-base/crypto-catchup"}},"content":"Notes on Networkings, OSI model, TCP/IP, UDP, Sockets, etc.\\n\\n\x3c!-- truncate --\x3e\\n\\n## OSI Model\\n\\nThe OSI (Open Systems Interconnection) model is a conceptual framework used to understand and implement network protocols in seven layers. Each layer serves a specific function and communicates with the layers directly above and below it. The seven layers of the OSI model are:\\n\\n| Layer | Name         | Protocol        | Function                                                       | TCP/IP Model   |\\n| ----- | ------------ | --------------- | -------------------------------------------------------------- | -------------- |\\n| 7     | Application  | HTTP, FTP, SMTP | Provides network services directly to user                     | Application    |\\n| 6     | Presentation | SSL, TLS        | Translates data formats, encryption, compression               | Application    |\\n| 5     | Session      | NetBIOS, PPTP   | Manages sessions between applications                          | Application    |\\n| 4     | Transport    | TCP, UDP        | Host to host, flow control                                     | Transport      |\\n| 3     | Network      | IP, ICMP        | Determines how data is sent to the                             | Internet       |\\n| 2     | Data Link    | Ethernet, PPP   | Handles error detection and correction from the physical layer | Network Access |\\n| 1     | Physical     | Ethernet, Wi-Fi | Transmits raw bit stream over the                              | Network Access |\\n\\n\\n![Example](assets/osi-model.webp)\\n\\n\\n## FIX protocol\\n\\nThe Financial Information eXchange (FIX) protocol is an electronic communications protocol initiated in 1992 for international real-time exchange of information related to securities transactions and markets.\\n\\n### Format\\n\\nA FIX message is a series of key-value pairs, where each key is a tag number and the value is the corresponding data. Below is an example of a simple FIX message:\\n\\n```text\\n8=FIX.4.2|9=176|35=D|49=CLIENT12|56=BROKER12|34=215|52=20100225-19:41:57.316|11=12345|21=1|55=IBM|54=1|60=20100225-19:41:57.316|38=100|40=2|44=150.25|59=0|10=128|\\n```\\n\\nIn this example, each key-value pair is separated by a pipe (`|`) character. The tags represent different fields in the FIX protocol, such as:\\n\\n- `8`: Begin String\\n- `9`: Body Length\\n- `35`: Message Type\\n- `49`: SenderCompID\\n- `56`: TargetCompID\\n- `34`: MsgSeqNum\\n- `52`: SendingTime\\n- `11`: ClOrdID\\n- `10`: CheckSum\\n\\n\\n### Common Message Types\\n\\n- `D`: New Order - Single\\n- `8`: Execution Report\\n- `F`: Order Cancel Request\\n- `9`: Order Cancel/Replace Request\\n\\n### SBE (Simple Binary Encoding)\\n\\nSBE is a binary encoding format designed for high-performance messaging in financial systems. It is used to encode FIX messages in a more compact and efficient manner, reducing latency and improving throughput.\\n\\nExample of SBE:\\n\\n```text\\n// Example SBE message structure\\nstruct Order {\\n    uint32_t orderId;      // 4 bytes\\n    char symbol[8];        // 8 bytes\\n    char side;             // 1 byte (B for Buy, S for Sell)\\n    uint32_t quantity;     // 4 bytes\\n    double price;          // 8 bytes\\n};\\n```\\n\\nThis structure represents a simple order message with fields for order ID, symbol, side (buy/sell), quantity, and price. The total size of this message would be 25 bytes, making it much more efficient than a text-based FIX message.\\n\\nPro and Cons of SBE:\\n\\n- Pros:\\n  - Reduced message size\\n  - Lower latency\\n  - Higher throughput\\n- Cons:\\n  - More complex to implement\\n  - Less human-readable\\n  - Requires schema management\\n\\n## Protocol Buffers\\n\\nProtocol Buffers (Protobuf) is a language-neutral, platform-neutral, extensible mechanism for serializing structured data. It is used to define how data should be structured and provides a way to encode and decode this data efficiently.\\n\\n\\n## Kernel Bypass\\n\\nKernel bypass is a technique used to improve the performance of network applications by allowing user-space applications to access hardware resources directly, bypassing the operating system kernel. This reduces the overhead associated with context switching and system calls, leading to lower latency and higher throughput.\\n\\nBenefit of kernel bypass:\\n\\n- Ultra-low latency\\n- Reduced CPU overhead\\n- Greater control over network resources\\n\\nWithout kernel bypass, the application interact with the network driver through the following\\n\\n```mermaid\\ngraph TD\\n    subgraph User Space\\n        App[Application]\\n    end\\n    subgraph Kernel Space\\n        TCPIP[TCP/IP Stack]\\n        TUNTAP[TUN/TAP Driver]\\n    end\\n    subgraph Hardware\\n        NIC[Network Interface Card]\\n    end\\n\\n    App --\x3e|System Call| TCPIP\\n    TCPIP --\x3e|System Call| TUNTAP\\n    TUNTAP --\x3e|DMA| NIC\\n```\\n\\n- TUN is for IP packets (Layer 3)\\n- TAP is for Ethernet frames (Layer 2)\\n- TCP (Layer 4) and UDP (Layer 4) are handled in the kernel space\\n\\n### Key Technologies\\n\\n1. DPDK (Data Plane Development Kit)\\n   - A set of libraries and drivers for fast packet processing in user space.\\n   - Provides poll-mode drivers that allow applications to directly access the NIC.\\n\\n2. PF_RING ZC (Zero Copy)\\n   - A high-speed packet capture library that enables zero-copy packet processing.\\n   - Allows applications to receive packets directly from the NIC without copying them to kernel space.\\n\\n3. RDMA (Remote Direct Memory Access)\\n   - Allows direct memory access from the memory of one computer into that of another without involving either one\'s operating system.\\n   - Used in high-performance computing and low-latency networking.\\n   - Bypass TCP/IP stack.\\n\\n4. Solarflare / OpenOnload\\n   - A high-performance network stack that runs in user space.\\n   - Provides low-latency and high-throughput networking by bypassing the kernel.\\n\\n5. Netmap\\n\\n6. eBPF / XDP (Extended Berkeley Packet Filter / eXpress Data Path)"},{"id":"crypto-catchup","metadata":{"permalink":"/knowledge-base/crypto-catchup","source":"@site/blog/2025-09-25-crypto-catchup.md","title":"Crypto Catchup","description":"Notes for pepration for crypto interviews.","date":"2025-09-25T00:00:00.000Z","tags":[{"inline":false,"label":"Cryptocurrency","permalink":"/knowledge-base/tags/crypto","description":"Cryptocurrency and Blockchain Technology"}],"readingTime":2.765,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"crypto-catchup","title":"Crypto Catchup","authors":["hinnytsang"],"tags":["crypto"]},"unlisted":false,"prevItem":{"title":"Networkings","permalink":"/knowledge-base/networkings"},"nextItem":{"title":"Exchange Engineering","permalink":"/knowledge-base/exchange-engineering"}},"content":"Notes for pepration for crypto interviews.\\n\\n\x3c!-- truncate --\x3e\\n\\n## Terminology\\n\\n- FUD: Fear, Uncertainty, Doubt\\n- HODL: Hold On for Dear Life\\n- FOMO: Fear of Missing Out\\n- REKT: Wrecked\\n- ATH: All Time High\\n- ATL: All Time Low\\n- DApp: Decentralized Application\\n- DEX: Decentralized Exchange\\n- CEX: Centralized Exchange\\n\\n\\n## Latest News\\n\\n### Ohio approves vendor to process crypto patment for state servicse\\n\\n### Circle explore reversible USDC transactions\\n\\n### AU drafts law to tighten oversight of crypto exchanges\\n\\n\\n\\n### BNB ATH\\n\\n1. BNB chain performance improve\\n  - Speed up block time from 3s to 0.75s\\n  - Capacity increased.\\n  - Gas fee drops by 10 times, make it to be one of the cheapest chains.\\n  - Improved security for MEV attack.\\n\\n2. Environemt improvement\\n  - World Liberty Finance published USD1, to replace BUSD.\\n  - USD1 mainly by Binance chain >> Ethereum >> Solana >> Tron.\\n  - Part of Abu Dhabi-based MGX\'s 2 billion investment in Binance.\\n  - A lots of Meme coins, RWA tokens, GameFi tokens are launched on BNB chain.\\n  - Pancake Swap (Major DEX on BNB chain)\\n  - Lista DAO (opensource liquidity and lending protocol, operating on BNB >> Eth) (Decentralized Autonomous Organization)\\n\\n3. Mechanism and market sentiment\\n  - Burn mechanism: 1/20 of profit from Binance exchange is used to buy back and burn BNB.\\n  - Quarterly burn, until 100M BNB (50% of total supply) is\\n  - DAT get into BNB burn\\n  - US interest rate drop.\\n\\n4. Others\\n\\n  - 4 Sep, Franklin Templeton announced to launch a BNB ETF in US.\\n\\n\\n\\n### RWA (Real World Asset)\\n- Tokenized real world asset, like stocks, and commodities, etc.\\n- \u4e2d\u8b49\u76e3 sorpped RWA in hong kong due to\\n- Mainly on ETH networks., issued by Tether Holdings (hold Bitfinex, issue USDT) / Paxos, etc.\\n\\n\\n### Stable coin\\n- Reserve 1 USD for each issued coin.\\n- USDT (Tether), USDC (Circle), ~~BUSD (Binance)~~, USD1 (World Liberty Finance)\\n\\n\\n### XRP\\n- Issued by Ripple Labs, used in RippleNet\\n- TPS is 1500, cost is low.\\n- If XRP etf approved in US, price may surge.\\n- EVM compatible, can be used in DeFi in the futures.\\n- Not PoS or PoS, UNL (Unique Node List): list of trusted validators maintained by Ripple.\\n\\n- Risk: Swift collaboration with chainlink to launch CBDC (Central Bank Digital Currency) network, may compete with RippleNet.\\n\\n### ADA\\n\\n- Issued by Cardano Foundation.\\n- PoS chain, low energy consumption.\\n\\n## SOL\\n\\n- Issued by Solana Foundation.\\n- PoS\\n\\n## ETH\\n\\n- The merge: switch from PoW to PoS, reduce energy consumption by 99.95% at 22 Sep 2022.\\n\\n\\n## Metrics\\n\\nUnlike traditional finance, we can measure by sth like PE ratio, PB ratio, etc. Crypto use the following metrics:\\n\\n1. Market Cap = Price * Circulating Supply\\n2. TVL (Total Value Locked) = Total value of asset locked in a protocol (eg. DeFi protocol)\\n3. FDV (Fully Diluted Valuation) = Price * Total Supply\\n\\n\\n## Concepts\\n\\n\\n- Yield: earn from staking, lending, liquidity providing, etc.\\n  - Staking: lock up crypto to get rewards, limited to PoS chain.\\n  - Earn: like saving account, (locked/ flexi) crypto to get interest, usually higher than staking.\\n  - Yield farming: provide liquidity to DEX, earn fee and token reward (Liquidity mining)\\n  - APY (Annual Percentage Yield): interest rate with compounding."},{"id":"exchange-engineering","metadata":{"permalink":"/knowledge-base/exchange-engineering","source":"@site/blog/2025-09-24-exchange.md","title":"Exchange Engineering","description":"Notes on YouTube video How to Build an Exchange by Jane Street.","date":"2025-09-24T00:00:00.000Z","tags":[{"inline":false,"label":"C++","permalink":"/knowledge-base/tags/cpp","description":"C++ Programming Language"}],"readingTime":1.49,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"exchange-engineering","title":"Exchange Engineering","authors":["hinnytsang"],"tags":["cpp"]},"unlisted":false,"prevItem":{"title":"Crypto Catchup","permalink":"/knowledge-base/crypto-catchup"},"nextItem":{"title":"C++ Primitive Types","permalink":"/knowledge-base/cpp-primitive"}},"content":"Notes on YouTube video [How to Build an Exchange](https://www.youtube.com/watch?v=b1e4t2k2KJY) by Jane Street.\\n\\n\x3c!-- truncate --\x3e\\n\\n## Difficulties\\n\\n1. High transaction rates (Scale)\\n2. Low, deterministic latency\\n3. Fairness\\n4. Reliability\\n5. Durability\\n6. Robustness to bad clients\\n\\nSpeaker built a crossing engine to handle messages of 500k/sec with ~1ms latency.\\n\\n## Simple Design\\n\\n```mermaid\\nflowchart TD\\n\\nMatchEngine[Match Engine] --\x3e Port1[Port 1]\\nMatchEngine[Match Engine] --\x3e Port2[Port 2]\\nMatchEngine[Match Engine] --\x3e Port3[Port 3]\\n\\nPort1 --\x3e Cloud((Somethings))\\nPort2 --\x3e Cloud\\nPort3 --\x3e Cloud\\n\\nCloud --\x3e Client[Client 1]\\nCloud --\x3e Client2[Client 2]\\nCloud --\x3e Client3[Client 3]\\n```\\n\\nBoardcast by udp to ensure low latency. However, udp is unreliable and can drop packets.\\n\\nHence, we add a lager of resenter (RT).\\n\\n- Everyone gets every message\\n- One-in-flight, latency determines throughput\\n\\n\\n\\n## Matching algorithm\\n\\n1. FIFO\\n2. TOP: people with best price and shares above threshold get priority.\\n3. Pro-Rata\\n4. Lead market maker\\n\\n\\n\\n\\n# Low Latency Related\\n\\n\\n## Real Contract Template\\n\\n1. Specific activity A\\n2. When run as part of System S\\n3. Throughtput X events / second\\n4. Duration time T\\n5. Hardware H, OS configuration O\\n6. Latency L @ percentile P\\n7. Coordinated ommission\\n8. Timing policy\\n\\n\\n## Microsecond Requiires\\n\\n1. Shared memory\\n   - Chronicle Queue: 50th %ile 0.5us\\n   - Aeron: 50th %ile 0.25us\\n   - Single trips in ~100ns\\n\\n\\n2. Single threaded\\n   - No synchronization\\n   - No complicated object pooling strategies\\n   - Scale out by partitioning your data and adding more microservices\\n\\n3. Hog the CPU and CPI pin\\n\\n4. Record all inputs and output.\\n   - Reproduce bugs\\n   - Measure latency\\n   - Replay is especially important\\n\\n5. Map your microservices onto your hardware.\\n\\n\\n## Hardest areas\\n\\n- Wait free (off heap) data structures, you know the cpu cycles required\\n\\n- Resilience / High Availability\\n\\n- Failover / hot-hot"},{"id":"cpp-primitive","metadata":{"permalink":"/knowledge-base/cpp-primitive","source":"@site/blog/2025-09-07-cpp-primitive.md","title":"C++ Primitive Types","description":"Notes on C++ Primitive Types.","date":"2025-09-07T00:00:00.000Z","tags":[{"inline":false,"label":"C++","permalink":"/knowledge-base/tags/cpp","description":"C++ Programming Language"}],"readingTime":0.39,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"cpp-primitive","title":"C++ Primitive Types","authors":["hinnytsang"],"tags":["cpp"]},"unlisted":false,"prevItem":{"title":"Exchange Engineering","permalink":"/knowledge-base/exchange-engineering"},"nextItem":{"title":"C++ Standard Library","permalink":"/knowledge-base/cpp-std"}},"content":"Notes on C++ Primitive Types.\\n\\n\x3c!-- truncate --\x3e\\n\\n## Primitive Types\\n\\n- `char`: 1 byte, typically used for characters.\\n- `short`: 2 bytes, used for small integers.\\n- `int`: 4 bytes, used for integers. (2 bytes on some systems)\\n- `float`: 4 bytes, used for floating-point numbers.\\n- `double`: 8 bytes, used for double-precision floating-point numbers.\\n- `bool`: 1 byte, used for boolean values (true or false).\\n- `long int`: 8-bytes on 64-bit systems, 4-bytes on 32-bit systems."},{"id":"cpp-std","metadata":{"permalink":"/knowledge-base/cpp-std","source":"@site/blog/2025-09-07-cpp-std.md","title":"C++ Standard Library","description":"Notes on C++ Standard Library.","date":"2025-09-07T00:00:00.000Z","tags":[{"inline":false,"label":"C++","permalink":"/knowledge-base/tags/cpp","description":"C++ Programming Language"}],"readingTime":0.195,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"cpp-std","title":"C++ Standard Library","authors":["hinnytsang"],"tags":["cpp"]},"unlisted":false,"prevItem":{"title":"C++ Primitive Types","permalink":"/knowledge-base/cpp-primitive"},"nextItem":{"title":"Database Design Principles","permalink":"/knowledge-base/database-design-principles"}},"content":"Notes on C++ Standard Library.\\n\\n\x3c!-- truncate --\x3e\\n\\n\\n## Deque\\n\\nDouble-ended queue in C++ STL.\\n\\nUnlike queue and stack, it provides random access with O(1) time complexity.\\n\\n![Example implementation](./assets/cpp_deque.png)\\n\\nHence, two pointer dereferences are required to access an element."},{"id":"database-design-principles","metadata":{"permalink":"/knowledge-base/database-design-principles","source":"@site/blog/2025-08-16-database-design-principles.md","title":"Database Design Principles","description":"Data base design principle","date":"2025-08-16T00:00:00.000Z","tags":[{"inline":false,"label":"Data Engineering","permalink":"/knowledge-base/tags/data-engineering","description":"Data Engineering Concepts and Techniques"}],"readingTime":0.92,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"database-design-principles","title":"Database Design Principles","authors":["hinnytsang"],"tags":["data-engineering"]},"unlisted":false,"prevItem":{"title":"C++ Standard Library","permalink":"/knowledge-base/cpp-std"},"nextItem":{"title":"Actor Model","permalink":"/knowledge-base/actor-model"}},"content":"Data base design principle\\n\\n\x3c!-- truncate --\x3e\\n\\n\\n## Data Integrity\\n\\n- Accurate and consistent data is maintained throughout the database.\\n\\n\\n## Normalization\\n\\n- Data is organized to reduce redundancy and improve data integrity.\\n\\nNormal Forms:\\n\\nDenote functional dependency for table A, B, C, D, E, F, G\\n\\n```\\nA, B -> C, D, E, F, G\\nA -> C\\nE -> F\\n```\\n\\nEtc.\\n\\n- 1NF: Atomic\\n- 2NF: No Partial Dependency\\n  - Any feature cannot be determined by only part of the primary key.\\n\\n- 3NF: No Transitive Dependency\\n  - If A -> B and B -> C, then A -> C should not hold (transitive dependency)\\n\\n- BCNF: No Non-Trivial Functional Dependency\\n- 4NF: No Multi-Valued Dependency\\n- 5NF: No Join Dependency\\n\\n## Scalability\\n\\n## Performance Optimization\\n\\n## Flexibility and Extensibility\\n\\n## Security\\n\\n## Atomicity\\n\\n## Referential Integrity\\n\\n## Naming Convention\\n\\n## Documentation\\n\\n\\n# Entity-Relationship Model\\n\\n# Dimensional Data Model\\n\\nUsed in data warehouse design. Comprised of facts and dimension table.\\n\\nGoal is to enable efficient querying (`SELECT` operation).\\n\\nUsed in a lot of Online Analytical Processing (OLAP) systems (e.g. Cognos, Tableau)."},{"id":"actor-model","metadata":{"permalink":"/knowledge-base/actor-model","source":"@site/blog/2025-08-14-actor-model.md","title":"Actor Model","description":"It is a concurrency model that treats \\"actors\\" as the fundamental units of computation.","date":"2025-08-14T00:00:00.000Z","tags":[{"inline":false,"label":"Computer Science","permalink":"/knowledge-base/tags/computer-science","description":"Computer Science Concepts and Techniques"}],"readingTime":0.54,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"actor-model","title":"Actor Model","authors":["hinnytsang"],"tags":["computer-science"]},"unlisted":false,"prevItem":{"title":"Database Design Principles","permalink":"/knowledge-base/database-design-principles"},"nextItem":{"title":"Market Data","permalink":"/knowledge-base/market-data"}},"content":"It is a concurrency model that treats \\"actors\\" as the fundamental units of computation.\\n\\n\x3c!-- truncate --\x3e\\n\\n## Concepts\\n\\nEverything is an actor.\\n\\nActor is computational entity that could response to what it receives, and can concurrently do:\\n\\n- send a finite number of message to other actors.\\n- create a finite number of new actors.\\n- designate the behavior to be used for the next message it receives.\\n\\nAnd the are no assumption of sequencial and parallel.\\n\\nMore rules:\\n\\n- actor does not share state with anybody else, but can have its own state.\\n- actor can only communicate with other actors by sending and receiving messages."},{"id":"market-data","metadata":{"permalink":"/knowledge-base/market-data","source":"@site/blog/2025-08-07-market-data.md","title":"Market Data","description":"Market data symbology refers to the system of codes and symbols to uniquely identify financial instruments and their attributes.","date":"2025-08-07T00:00:00.000Z","tags":[{"inline":false,"label":"Interview","permalink":"/knowledge-base/tags/interview","description":"Interview Preparation and Tips"}],"readingTime":2.025,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"market-data","title":"Market Data","authors":["hinnytsang"],"tags":["interview"]},"unlisted":false,"prevItem":{"title":"Actor Model","permalink":"/knowledge-base/actor-model"},"nextItem":{"title":"System Design Interview 1","permalink":"/knowledge-base/system-design-interview-1"}},"content":"Market data symbology refers to the system of codes and symbols to uniquely identify financial instruments and their attributes.\\n\\n\x3c!-- truncate --\x3e\\n\\n\\n## Ticker Symbols\\n\\nAlphabetic codes used to uniquely identify securities on exchange, examples:\\n\\n- AAPL for Apple Inc.\\n- TSLA for Tesla Inc.\\n\\n## ISIN (International Securities Identification Number)\\n\\nA 12-character alphanumeric code that uniquely identifies a security, used globally. Example:\\n\\n- US0378331005 for Apple Inc.\\n- US88160R1014 for Tesla Inc.\\n\\n## CUSIP (Committee on Uniform Securities Identification Procedures)\\n\\nA 9-character alphanumeric code used in the *United States* to identify securities. Example:\\n\\n- 037833100 for Apple Inc.\\n- 88160R101 for Tesla Inc.\\n\\n## SEDOL (Stock Exchange Daily Official List)\\n\\nA 7-character alphanumeric code used in the *United Kingdom and Ireland* to identify securities. Example:\\n\\n- 0263494 for Apple Inc.\\n- 0734644 for Tesla Inc.\\n\\n\\n## FIGI (Financial Instrument Global Identifier)\\n\\nA 12-character alphanumeric code that uniquely identifies a financial instrument, used globally. Example:\\n\\n- BBG000B9XRY4 for Apple Inc.\\n- BBG000B9XRY5 for Tesla Inc.\\n\\n## RIC (Reuters Instrument Code)\\n\\nAn alphanumeric code used to identify financial instruments, primarily in the *Reuters* trading platform. Example:\\n\\n- AAPL.O for Apple Inc.\\n- TSLA.O for Tesla Inc.\\n\\n\\n# Summary of Market Data Identifiers\\n\\n| Identifier                         | Length    | Coverage          | Structure                                               | Primary Use              | Key Benefits                 | Limitations                |\\n| ---------------------------------- | --------- | ----------------- | ------------------------------------------------------- | ------------------------ | ---------------------------- | -------------------------- |\\n| **Ticker Symbol**                  | 1-5 chars | Exchange-specific | No specific structure                                   | Quick trading reference  | Simple, widely recognized    | Not globally unique        |\\n| **ISIN**                           | 12 chars  | Global            | Country(2) + NSIN(9) + *cd(1)                           | Cross-border trading     | Universal standard           | Complex calculation        |\\n| **CUSIP** (Q-sip)                  | 9 chars   | North America     | Issuer(6) + issue type(2) + cd(1)                       | US/Canada trading        | Widely used in North America | Regional only, proprietary |\\n| **SEDOL**                          | 7 chars   | UK/Ireland        | Alphanumeric no vowels + cd(1)                          | UK securities trading    | Efficient for UK market      | Limited geographic scope   |\\n| **FIGI**          (Formerly BBGID) | 12 chars  | Global            | Consonants(2) + \'G\' + Alphanumeric no vowels(8) + cd(1) | Bloomberg ecosystem      | Open-source, free            | Less widely adopted        |\\n| **RIC**                            | Variable  | Global            | Alphanumeric, often with exchange suffix                | Reuters trading platform | Widely used in Reuters       | Not standardized globally  |\\n\\nWhere:\\n\\n* cd: Check Digit\\n\\n# Summary of Market Data Identifiers"},{"id":"system-design-interview-1","metadata":{"permalink":"/knowledge-base/system-design-interview-1","source":"@site/blog/2025-08-04-system-design-interview.md","title":"System Design Interview 1","description":"Collections of the system design interview questions.","date":"2025-08-04T00:00:00.000Z","tags":[{"inline":false,"label":"Interview","permalink":"/knowledge-base/tags/interview","description":"Interview Preparation and Tips"}],"readingTime":0.545,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"system-design-interview-1","title":"System Design Interview 1","authors":["hinnytsang"],"tags":["interview"]},"unlisted":false,"prevItem":{"title":"Market Data","permalink":"/knowledge-base/market-data"},"nextItem":{"title":"Questions to Ask the Interviewer","permalink":"/knowledge-base/questions-to-interviewer-1"}},"content":"Collections of the system design interview questions.\\n\\n\x3c!-- truncate --\x3e\\n\\n## Script for the interview:\\n\\n1. Clarify the requirements.\\n\\n2. Propose a high-level design.\\n\\n3. Deep dive.\\n\\n4. Wrap-up and refine.\\n\\n\\n### Example questions:\\n\\n> Build a system that takes uploaded .csv files with different schemas and harmonizes them.\\n\\n\\n1. **Clarify the requirements:**\\n   - Context\\n      - who will use the system?\\n      - how will they use it?\\n      - where will they use it?\\n   - Functional Feqtures\\n   - Non-functional requirements\\n      - Latency\\n      - Availability vs consistency\\n      - Scalability\\n   - key numbers\\n      - Daily active users\\n      - Files per user\\n      - Average file size\\n      Exstimate daily volume of data.\\n   - Constraints"},{"id":"questions-to-interviewer-1","metadata":{"permalink":"/knowledge-base/questions-to-interviewer-1","source":"@site/blog/2025-08-03-questions-to-interviewer.md","title":"Questions to Ask the Interviewer","description":"Collections of the quesions.","date":"2025-08-03T00:00:00.000Z","tags":[{"inline":false,"label":"Interview","permalink":"/knowledge-base/tags/interview","description":"Interview Preparation and Tips"}],"readingTime":0.435,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"questions-to-interviewer-1","title":"Questions to Ask the Interviewer","authors":["hinnytsang"],"tags":["interview"]},"unlisted":false,"prevItem":{"title":"System Design Interview 1","permalink":"/knowledge-base/system-design-interview-1"},"nextItem":{"title":"Finance Knowledge Notes","permalink":"/knowledge-base/finance-knowledges"}},"content":"Collections of the quesions.\\n\\n\x3c!-- truncate --\x3e\\n\\n1. Do you have any questions or concerns about my qualifications for this role?\\n    - If possitive: \\"Great! I look forward to the next steps in the interview process.\\"\\n    - If negative: Non defensive response:\\n        - Be honest.\\n        - Thank you so much, and I appreciate your feedback.\\n\\n2. What are the skills and behaviors of the most effecrive people on your team hear in XXX?\\n\\n3. What attracted you to work for this company, and what keeps you here?"},{"id":"finance-knowledges","metadata":{"permalink":"/knowledge-base/finance-knowledges","source":"@site/blog/2025-08-02-finance-knowledges.md","title":"Finance Knowledge Notes","description":"Below are some finance notes.","date":"2025-08-02T00:00:00.000Z","tags":[{"inline":false,"label":"Finance","permalink":"/knowledge-base/tags/finance","description":"Financial Concepts and Techniques"}],"readingTime":1.14,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"finance-knowledges","title":"Finance Knowledge Notes","authors":["hinnytsang"],"tags":["finance"]},"unlisted":false,"prevItem":{"title":"Questions to Ask the Interviewer","permalink":"/knowledge-base/questions-to-interviewer-1"},"nextItem":{"title":"Probability Puzzles 1","permalink":"/knowledge-base/probability-puzzles-1"}},"content":"Below are some finance notes.\\n\\n\x3c!-- truncate --\x3e\\n\\n\\n### DV01\\n\\nDV01 (dollar value of 01) measures the change in the price of a bond for a 1 basis point (0.01%) change in yield.\\n\\n(Sensitivity of bond price to yield change)\\n\\n- Linear approximation of price sensitivity, non-linear if large yield changes.\\n- Used in fixed-income portfolio management.\\n\\nIt is calculated as:\\n```math\\nDV01 = -\\\\frac{\\\\Delta P}{\\\\Delta y} \\\\times 10000\\n```\\n\\n\\n*The dollar duration of a portfolio is the sum of the DV01 of each bond in the portfolio*.\\n\\n### Value at Risk (VaR)\\n\\n\\nGiven confidence level $\\\\alpha$, the VaR is defined as\\n\\n```math\\n\\\\alpha = \\\\int_{-VaR}^{\\\\infty} xf(x) dx\\n```\\n\\nwhere $x$ is the dollar profit (loss) and $f(x)$ is the probability density function.\\n\\nHowever, it is not-additive, i.e. if portfolio $C$ = $A + B$, it is not guaranteed that $VaR(C) < VaR(A) + VaR(B)$.\\n\\n\\n### Forward and Futures\\n\\nIn the interest rate is deterministics, the forwards and futures prices are equivalent.\\n\\n```math\\nF = S_0 e^{(r + u - y)\\\\tau},\\n```\\n\\nwhere $u$ is the storages cost, $y$ is the divident yield for investment assets, covenience yield for commodities, and foreign risk-free interest rate for foreign exchange.\\n\\n\\n### Interest Rate Model\\n\\nTwo categories:\\n\\n1. Short rate models\\n    - Evolution of instantaneous interest rate is stochastic.\\n\\n2. Forward rate models\\n\\n\\nAnother classification\\n\\n1. Arbitrage-free models\\n\\n2. Equilibrium models"},{"id":"probability-puzzles-1","metadata":{"permalink":"/knowledge-base/probability-puzzles-1","source":"@site/blog/2025-07-15-probability-puzzles.md","title":"Probability Puzzles 1","description":"Below are some probability puzzles.","date":"2025-07-15T00:00:00.000Z","tags":[{"inline":false,"label":"Quant","permalink":"/knowledge-base/tags/quant","description":"Quantitative Finance"},{"inline":false,"label":"Stochastic","permalink":"/knowledge-base/tags/stochastic","description":"Stochastic Calculus"},{"inline":false,"label":"Probability","permalink":"/knowledge-base/tags/probability","description":"Probability Theory"},{"inline":false,"label":"Combinatorics","permalink":"/knowledge-base/tags/combinatorics","description":"Combinatorial Mathematics"}],"readingTime":3.905,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"probability-puzzles-1","title":"Probability Puzzles 1","authors":["hinnytsang"],"tags":["quant","stochastic","probability","combinatorics"]},"unlisted":false,"prevItem":{"title":"Finance Knowledge Notes","permalink":"/knowledge-base/finance-knowledges"},"nextItem":{"title":"Paper Review - A Census of the Factor Zoo","permalink":"/knowledge-base/a-census-of-the-factor-zoo"}},"content":"Below are some probability puzzles.\\n\\n\x3c!-- truncate --\x3e\\n\\n1. There are 6 players, numbered 1 to 6. Player 1 rolls a die. If Player 1 rolls a 1, he wins and the game ends.\\n\\n    If Player 1 rolls any other number, the die is passed to the player corresponding to the rolled number, and the game continues with that player rolling. The game ends when a player rolls their own number.\\n\\n    <details>\\n\\n    <summary>Solution</summary>\\n\\n      ```math\\n      p = \\\\frac{1}{6} + \\\\frac{5}{6} \\\\frac{1 - p}{5}\\n      ```\\n\\n    </details>\\n\\n\\n\\n2. A line of 100 airline passengers is waiting to board a plane. They each hold a ticket to one of the 100 seats on that flight. For convenience, let\'s say that the n th passenger in line has a ticket for seat number \'n\'. Being drunk, the first person in line picks a random seat (equally likely for each seat). All of the other passengers are sober, and will go to their assigned seats unless it is already occupied; If it is occupied, they will then find a free seat to sit in, at random. What is the probability that the last (100th) person to board the plane will sit in their own seat (#100)?\\n\\n    <details>\\n\\n    <summary>Solution</summary>\\n\\n      ```math\\n      p = 1 / 100 + 99 / 100 * (1 / 99 + 98 / 99 * (1 / 98 + \\\\cdots ))\\n      ```\\n\\n      ```math\\n      p = 1 / 100 + 1 / 100 + 98 / 100 * (1 / 98 + 97 / \\\\cdots)\\n      ```\\n\\n      ```math\\n      p = 1 / 100 + 1 / 100 + \\\\cdots + 1 / 100\\n      ```\\n\\n      ```math\\n      p = 1 / 100 + 1 / 100 + \\\\cdots + 1 / 100\\n      ```\\n\\n      ```math\\n      p = 1 / 2\\n      ```\\n\\n    </details>\\n\\n\\n3. Expected number of flip to get 2 heads in a row.\\n\\n    <details>\\n\\n    <summary>Solution</summary>\\n\\n    The answer is simple, let say the expected number is $x$.\\n\\n    1. If we first flip the first tail, we need $x + 1$ flips to get two heads, with prob = $\\\\frac{1}{2}$.\\n\\n    2. If we first flip the first head ($p=\\\\frac{1}{2}$):\\n\\n       1. $1/2$ probability to get a head. Than the total number of flips is $2$.\\n\\n       2. $1/2$ probability to get a tail. Than the total number of flips is $x + 2$ as we already wasted two flips.\\n\\n    ```math\\n    x = \\\\frac{1}{2} (x + 1) + \\\\frac{1}{2} \\\\left( \\\\frac{1}{2} \\\\cdot 2 + \\\\frac{1}{2} (x + 2) \\\\right)\\n    ```\\n\\n    Hance, $x = 6$.\\n\\n    </details>\\n\\n\\n4. Generalie to question 3, what if $n$ heads in a row?\\n\\n    <details>\\n\\n    <summary>Solution</summary>\\n\\n    *Inspired by reference 2*.\\n\\n    Denot $E_n$ as the expected number of flips to get $n$ heads in a row.\\n\\n    When we need to get 1 more head from $E_{n-1}$, we have two cases:\\n\\n    1. We flip a head then we need $1$ more flips.\\n\\n    2. We flip a tail then we need $E_n + 1$ more flips (One for the current useless flip)\\n\\n    ```math\\n    E_n = \\\\frac{1}{2} (E_{n - 1} + 1) + \\\\frac{1}{2} (E_{n - 1} + E_n + 1)\\n    ```\\n\\n    Rearranging gives:\\n\\n    ```math\\n    E_n = 2 E_{n - 1} + 2\\n    ```\\n\\n    Let $f(n) = E_n + 2$, we have $2 f(n - 1) = 2 E_{n - 1} + 4 = f(n)$. Hance\\n\\n    ```math\\n    f(n) = 2^{n + 1}\\n    ```\\n\\n    and\\n\\n    ```math\\n    E_n = 2^{n + 1} - 2\\n    ```\\n\\n    </details>\\n\\n\\n5. Expected number of steps for a drunk man to reach one end of the bridge.\\n\\n    Question from *A Practical Guide to Quantitative Finance Interviews*.\\n\\n    The drunk man initially stands as $p$-th meter of a 100m long bridge, and it have 1/2 probability to move 1 meter left or right. What is the expected number of steps for him to reach either end of the bridge?\\n\\n    <details>\\n\\n    <summary>Solution</summary>\\n\\n    Observed that\\n\\n    ```math\\n    E(S_n) = 1 / 2 (E(S_{n - 1}) + 1) + 1 / 2 (E(S_{n + 1}) - 1) = E(S_{n - 1}) = 0\\n    ```\\n\\n    Hence it is a martingale, and we can use the optional stopping theorem.\\n\\n    Let $E_n$ be the expected number of steps to reach either end of the bridge from $n$-th meter, let $P_p$ be the probability of reaching the left end first.\\n\\n    ```math\\n    E(S_n) = P_p (p) + (1 - P_p) (100 - p) = 0\\n    ```\\n    Rearranging gives:\\n\\n    ```math\\n    P_p = \\\\frac{100 - p}{100}\\n    ```\\n\\n    Using another martingale\\n\\n    ```math\\n    E(S_n ^ 2 - n) = 0\\n    ```\\n\\n    gives\\n\\n    ```math\\n    P_p (p^2) + (1 - P_p) ((100 - p)^2) - n = 0\\n    ```\\n    Rearranging gives:\\n\\n    ```math\\n    n = P_p p^2 + (1 - P_p) (100 - p)^2\\n    ```\\n\\n    </details>\\n\\n\\n### References\\n\\n\\n1. [CodeChef - Mathematical Expectation](https://www.codechef.com/wiki/tutorial-expectation)\\n\\n2. [Math Stack Exchange - Probability Puzzles](https://math.stackexchange.com/questions/364038/expected-number-of-coin-tosses-to-get-five-consecutive-heads)"},{"id":"a-census-of-the-factor-zoo","metadata":{"permalink":"/knowledge-base/a-census-of-the-factor-zoo","source":"@site/blog/2025-05-30-a-census-of-the-factor-zoo.md","title":"Paper Review - A Census of the Factor Zoo","description":"Just see a post oh threads suggesting this paper, and I found it very interesting. The author claim that almost all of the past research fails tickle the multiple testing problem, probably appear \'significant\' by chance.","date":"2025-05-30T00:00:00.000Z","tags":[{"inline":false,"label":"Data Mining","permalink":"/knowledge-base/tags/data-mining","description":"Data Mining Techniques"},{"inline":false,"label":"Machine Learning","permalink":"/knowledge-base/tags/machine-learning","description":"Machine Learning"},{"inline":false,"label":"Paper Review","permalink":"/knowledge-base/tags/paper-review","description":"Reviews of Academic Papers"}],"readingTime":0.81,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"a-census-of-the-factor-zoo","title":"Paper Review - A Census of the Factor Zoo","authors":["hinnytsang"],"tags":["data-mining","machine-learning","paper-review"]},"unlisted":false,"prevItem":{"title":"Probability Puzzles 1","permalink":"/knowledge-base/probability-puzzles-1"},"nextItem":{"title":"Generating Function","permalink":"/knowledge-base/generating-function"}},"content":"Just see a post oh threads suggesting this paper, and I found it very interesting. The author claim that almost all of the past research fails tickle the multiple testing problem, probably appear \'significant\' by chance.\\n\\n\x3c!-- truncate --\x3e\\n\\nThe author listed 382 factors published in top journals, and point out that\\n\\n- Papers with positive results tend to be cited more.\\n- Journal with high quality (aka impact factor) usually needs positive results to be published.\\n\\nKey points of the paper:\\n\\n1. More factors involved, more likely to be chance.\\n  - This is known as multiple comparisons problem.\\n  > *The more you look, the more likely you are to find something that looks like a signal, even if it is not a signal.*\\n2. File drawer effect:\\n  - Researcher skip papers they are not excited about (negative results).\\n3. Review the target goal of acceptance rate, but the complexity is need to be considered.\\n4. Academic publication sometimes ignore transaction costs."},{"id":"generating-function","metadata":{"permalink":"/knowledge-base/generating-function","source":"@site/blog/2025-05-30-generating-function.md","title":"Generating Function","description":"I just got asked a question that could be solved by generating function, while I was not familiar with it. So I did some research and found out that generating function is a powerful tool in combinatorics and probability theory. Below are some notes that I jotted after reading openmathbooks.org.","date":"2025-05-30T00:00:00.000Z","tags":[{"inline":false,"label":"Combinatorics","permalink":"/knowledge-base/tags/combinatorics","description":"Combinatorial Mathematics"},{"inline":false,"label":"Probability","permalink":"/knowledge-base/tags/probability","description":"Probability Theory"}],"readingTime":2.775,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"generating-function","title":"Generating Function","authors":["hinnytsang"],"tags":["combinatorics","probability"]},"unlisted":false,"prevItem":{"title":"Paper Review - A Census of the Factor Zoo","permalink":"/knowledge-base/a-census-of-the-factor-zoo"},"nextItem":{"title":"Quant Interview Questions 1","permalink":"/knowledge-base/quant-interview-questions-1"}},"content":"I just got asked a question that could be solved by generating function, while I was not familiar with it. So I did some research and found out that generating function is a powerful tool in combinatorics and probability theory. Below are some notes that I jotted after reading [openmathbooks.org](https://discrete.openmathbooks.org/dmoi2/section-27.html).\\n\\n\x3c!-- truncate --\x3e\\n\\n\\nA generating function is a formal power series whose coefficients correspond to a sequence of numbers. It is often used to encode sequences and to manipulate them algebraically. The idea is to represent a infinite sequence with a single function. Let say we have a sequence,\\n\\n```math\\n1, 2, 3, 4, \\\\ldots\\n```\\n\\nWe can represent it with a infinite series:\\n\\n```math\\nf(x) = 1 + 2x + 3x^2 + 4x^3 + \\\\ldots,\\n```\\n\\nwhere $|x| \\\\leq 1 $ is a variable, this called the generating series of the sequence. If the series converges, i,e,\\n\\n```math\\ng(x) = 1 + 1 + 1 + 1 + \\\\ldots = \\\\frac{1}{1-x},\\n```\\n\\nsuch a function is called a generating function. The coefficients of the series are the terms of the sequence, and the variable $x$ encodes the position of the term in the sequence.\\n\\n## Examples\\n\\nWe can make use of the know generating functions to find the generating function of other sequences. Below are some examples:\\n\\nSwitch $x \\\\to -x$ in the series, we get:\\n\\n```math\\n\\\\frac{1}{1 + x} = 1 - x + x^2 - x^3 + \\\\ldots \\\\quad \\\\text{which generates} \\\\quad 1, -1, 1, -1, \\\\ldots.\\n```\\n\\nIf $x \\\\to 3x$,\\n```math\\n\\\\frac{1}{1 - 3x} = 1 + 3x + 9x^2 + 27x^3 + \\\\ldots \\\\quad \\\\text{which generates} \\\\quad 1, 3, 9, 27, \\\\ldots.\\n```\\n\\nWhat about a sequence like $2, 4, 10, 28, \\\\ldots$? It is just like\\n```math\\n(1 + 0) + (1 + 3)x + (1 + 9)x^2 + (1 + 27)x^3 + \\\\ldots = \\\\frac{1}{1 - 3x} + \\\\frac{1}{1 - x}.\\n```\\n\\nIf we replace $x$ with $x^2$ in the series of odd number, we get:\\n\\n```math\\n\\\\frac{1}{1 - x^2} = 1 + x^2 + x^4 + x^6 + \\\\ldots \\\\quad \\\\text{which generates} \\\\quad 1, 0, 1, 0, 1, \\\\ldots.\\n```\\n\\nSimilarly,\\n\\n```math\\n\\\\frac{1}{1 - x} - \\\\frac{1}{1 - x^2} = x + x^3 + x^5 + x^7 + \\\\ldots \\\\quad \\\\text{which generates} \\\\quad 0, 1, 0, 1, 0, \\\\ldots.\\n```\\n\\nWe can also take the derivative of the generating function,\\n\\n```math\\n\\\\frac{d}{dx} \\\\left( \\\\frac{1}{1 - x} \\\\right) = \\\\frac{1}{(1 - x)^2} = 1 + 2x + 3x^2 + 4x^3 + \\\\ldots \\\\quad \\\\text{which generates} \\\\quad 1, 2, 3, 4, \\\\ldots.\\n```\\n\\nWhat if we are interest as the sequence of the odd number? Assume its generating function as $A$\\n\\n```math\\n\\\\begin{align*}\\nA &= 1 + 3x + 5x^2 + 7x^3 + \\\\ldots \\\\\\\\\\nxA &= 1x + 3x^2 + 5x^3 + \\\\ldots \\\\\\\\\\n(1 - x)A &= 1 + 2x  + 2x^2 + 2x^3 + \\\\ldots \\\\\\\\\\n&= 1 + \\\\frac{2x}{1 - x} \\\\\\\\\\n\\\\implies\\nA &= \\\\frac{1}{1 - x} + \\\\frac{2x}{(1 - x) ^ 2} \\\\\\\\\\n\\\\end{align*}\\n```\\n\\n## Recurrence Relations\\n\\nGenerating functions can also be used to solve recurrence relations. For example, consider the Fibonacci sequence:\\n\\n```math\\nF_i = F_{i-1} + F_{i-2}, \\\\quad F_0 = 1, \\\\quad F_1 = 1.\\n```\\nThe generating function for the Fibonacci sequence can be derived as follows:\\n\\nTBC."},{"id":"quant-interview-questions-1","metadata":{"permalink":"/knowledge-base/quant-interview-questions-1","source":"@site/blog/2025-05-30-quant-questions.md","title":"Quant Interview Questions 1","description":"Below are some quant interview questions.","date":"2025-05-30T00:00:00.000Z","tags":[{"inline":false,"label":"Quant","permalink":"/knowledge-base/tags/quant","description":"Quantitative Finance"},{"inline":false,"label":"Stochastic","permalink":"/knowledge-base/tags/stochastic","description":"Stochastic Calculus"}],"readingTime":3.79,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"quant-interview-questions-1","title":"Quant Interview Questions 1","authors":["hinnytsang"],"tags":["quant","stochastic"]},"unlisted":false,"prevItem":{"title":"Generating Function","permalink":"/knowledge-base/generating-function"},"nextItem":{"title":"Generative AI Evaluation Methods","permalink":"/knowledge-base/generative-ai-evaluation-methods"}},"content":"Below are some quant interview questions.\\n\\n\x3c!-- truncate --\x3e\\n\\n1. Difference between European, American and Bermudan options.\\n\\n    <details>\\n    <summary>Answer</summary>\\n\\n    - European Options: Can only be exercised at expiration.\\n    - American Options: Can be exercised at any time before expiration.\\n    - Bermudan Options: Can be exercised on specific dates before expiration.\\n\\n    </details>\\n\\n2. What are the assumptions of Black-Scholes model?\\n\\n    <details>\\n    <summary>Answer</summary>\\n    - European options.\\n    - Geometric Brownian motion.\\n    - No arbitrage opportunities.\\n    - Constant volatility.\\n    - Constant interest rate.\\n    - No dividends.\\n    - Frictionless Markets.\\n    - Perfectly hedged.\\n    - Continuous trading.\\n    - Infinite liquidity.\\n    </details>\\n\\n\\n3. Derive the Black-Scholes formula.\\n\\n    <details>\\n    <summary>Answer</summary>\\n\\n    Geometric Brownian motion of the stock price $`S_t`$:\\n\\n    ```math\\n    dS_t = \\\\mu S_t dt + \\\\sigma S_t dW_t\\n    ```\\n\\n    where $`\\\\mu`$ is the drift, $`\\\\sigma`$ is the volatility, and $`W_t`$ is a Wiener process. It states that the infinitesimal rate of return on the stock has an expected value of $`\\\\mu dt`$ and a variance of $`\\\\sigma^2 dt`$.\\n\\n    The value of the options depends on stock price $`S_t`$, time $`t`$, denoted as $`V(S_t, t)`$. Hence, ito\'s lemma gives:\\n\\n    ```math\\n    \\\\begin{align*}\\n    d V(S_t, t)\\n    &= \\\\left(\\n      \\\\frac{\\\\partial V}{\\\\partial t}\\n      + \\\\frac{1}{2} \\\\frac{\\\\partial^2 V}{\\\\partial S^2} \\\\sigma^2 S_t^2\\n    \\\\right) dt\\n    + \\\\frac{\\\\partial V}{\\\\partial S} d S \\\\\\\\\\n    &= \\\\left(\\n      \\\\frac{\\\\partial V}{\\\\partial t}\\n      + \\\\frac{1}{2} \\\\frac{\\\\partial^2 V}{\\\\partial S^2} \\\\sigma^2 S_t^2\\n    \\\\right) dt\\n    + \\\\frac{\\\\partial V}{\\\\partial S}\\\\left(\\n      \\\\mu S_t dt + \\\\sigma S_t dW_t\\n    \\\\right) \\\\\\\\\\n    &= \\\\left(\\n      \\\\frac{\\\\partial V}{\\\\partial t}\\n      + \\\\mu S \\\\frac{\\\\partial V}{\\\\partial S}\\n      + \\\\frac{1}{2} \\\\frac{\\\\partial^2 V}{\\\\partial S^2} \\\\sigma^2 S_t^2\\n    \\\\right) dt\\n    + \\\\sigma S \\\\frac{\\\\partial V}{\\\\partial S}dW_t\\\\\\\\\\n    \\\\end{align*}\\n    ```\\n\\n    Base on the behavior of the option price, we construct a portfolio that consists of the option and a short position in $`S_t`$:\\n\\n    ```math\\n    \\\\Pi = - V(S_t, t) + \\\\frac{\\\\partial V}{\\\\partial S} S_t\\n    ```\\n    > It is a Delta ($\\\\Delta = \\\\frac{\\\\partial V}{\\\\partial S}$) hedging using the stock. Thus the net delta is zero.\\n\\n    And assuming the portfolio is self-financing (no additional cash flow), we have (Assuming delta is constant):\\n\\n    ```math\\n    d\\\\Pi = - dV + \\\\frac{\\\\partial V}{\\\\partial S} dS_t\\n    ```\\n\\n    By substituting the expression of $`dV`$ and $`dS_t`$ into the equation, we have:\\n\\n    ```math\\n    d\\\\Pi = \\\\left(\\n      - \\\\frac{\\\\partial V}{\\\\partial t}\\n      - \\\\frac{1}{2} \\\\frac{\\\\partial^2 V}{\\\\partial S^2} \\\\sigma^2 S_t^2\\n    \\\\right) dt\\n    ```\\n\\n    Noted that the stochastic term is eliminated. Let\'s assume the portfolio have a risk-free return $`r`$, i.e.\\n\\n    ```math\\n    d\\\\Pi = r \\\\Pi dt\\n    ```\\n\\n    Thus,\\n\\n    ```math\\n    \\\\left(\\n      - \\\\frac{\\\\partial V}{\\\\partial t}\\n      - \\\\frac{1}{2} \\\\frac{\\\\partial^2 V}{\\\\partial S^2} \\\\sigma^2 S_t^2\\n    \\\\right) dt = r \\\\left( - V + \\\\frac{\\\\partial V}{\\\\partial S} S_t \\\\right) dt\\n    ```\\n\\n    Rearranging the equation gives:\\n\\n    ```math\\n    \\\\frac{\\\\partial V}{\\\\partial t} + r S_t \\\\frac{\\\\partial V}{\\\\partial S}\\n    + \\\\frac{1}{2} \\\\sigma^2 S_t^2 \\\\frac{\\\\partial^2 V}{\\\\partial S^2} - r V = 0\\n    ```\\n\\n    This is the Black-Scholes PDE.\\n\\n    </details>\\n\\n\\n4. Sample 3 from [0, 1], what is the expectation of the maximum?\\n\\n    <details>\\n    <summary>Answer</summary>\\n\\n    Let say $`X_1, X_2, X_3`$ are the three samples from uniform distribution $`U(0, 1)`$. The maximum is $`M = \\\\max(X_1, X_2, X_3)`$. The cumulative distribution function (CDF) of $`M`$ is:\\n\\n    ```math\\n    P(M \\\\leq x) = P(X_1 \\\\leq x, X_2 \\\\leq x, X_3 \\\\leq x) = P(X_1 \\\\leq x) P(X_2 \\\\leq x) P(X_3 \\\\leq x) = x^3\\n    ```\\n    The probability density function (PDF) is:\\n\\n    ```math\\n    f_M(x) = \\\\frac{d}{dx} P(M \\\\leq x) = 3x^2\\n    ```\\n    The expectation of $`M`$ is:\\n\\n    ```math\\n    E[M] = \\\\int_0^1 x f_M(x) dx = \\\\int_0^1 x \\\\cdot 3x^2 dx = 3 \\\\int_0^1 x^3 dx = 3 \\\\cdot \\\\frac{1}{4} = \\\\frac{3}{4}\\n    ```\\n\\n    </details>\\n\\n\\n5.  We have a stick with unit length which we cut randomly at two spots. What is the expected length of the tallest piece?\\n\\n    <details>\\n    <summary>Answer</summary>\\n\\n    Let $`X_1`$ and $`X_2`$ be the two random cut points, uniformly distributed over the interval $[0, 1]$. Without loss of generality, assume $`X_1 \\\\leq X_2`$. The lengths of the three pieces are:\\n\\n    - Left piece: $`X_1`$\\n    - Middle piece: $`X_2 - X_1`$\\n    - Right piece: $`1 - X_2`$\\n\\n    The maximum length is:\\n\\n    ```math\\n    M = \\\\max(X_1, X_2 - X_1, 1 - X_2)\\n    ```\\n\\n    To find the expected value of $`M`$, we can use the law of total expectation. The joint distribution of $`X_1`$ and $`X_2`$ is uniform over the unit square. We can compute the expected value by integrating over the region where $`X_1 \\\\leq X_2`$.\\n\\n    The expected value can be computed as:\\n\\n    ```math\\n    E[M] = \\\\int_0^1 \\\\int_{x_1}^1 \\\\max(x_1, x_2 - x_1, 1 - x_2) dx_2 dx_1\\n    ```\\n\\n    After evaluating this integral, we find that:\\n\\n    ```math\\n    E[M] = \\\\frac{5}{6}\\n    ```\\n\\n    </details>\\n\\n\\n6. Moving dot and polygon relative position detection. Calculate the time complexity"},{"id":"generative-ai-evaluation-methods","metadata":{"permalink":"/knowledge-base/generative-ai-evaluation-methods","source":"@site/blog/2025-05-16-generative-ai-evaluation.md","title":"Generative AI Evaluation Methods","description":"The evaluation of generative AI models is a complex task that requires a combination of qualitative and quantitative methods. Here is the points that I summarized from the Machine Learning Operations with Vertex AI tutorial from Google.","date":"2025-05-16T00:00:00.000Z","tags":[{"inline":false,"label":"Generative AI","permalink":"/knowledge-base/tags/generative-ai","description":"Generative AI"}],"readingTime":2.145,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"generative-ai-evaluation-methods","title":"Generative AI Evaluation Methods","authors":["hinnytsang"],"tags":["generative-ai"]},"unlisted":false,"prevItem":{"title":"Quant Interview Questions 1","permalink":"/knowledge-base/quant-interview-questions-1"},"nextItem":{"title":"Ito\'s Lamma","permalink":"/knowledge-base/ito-lamma"}},"content":"The evaluation of generative AI models is a complex task that requires a combination of qualitative and quantitative methods. Here is the points that I summarized from the Machine Learning Operations with Vertex AI tutorial from Google.\\n\\n\x3c!-- truncate --\x3e\\n\\nIn general, the evaluation methods can be categorized into several types:\\n\\n1. Binary Evaluation\\n    - e.g. positive or negative sentiment analysis, spam detection, and appropriate content detection.\\n\\n2. Category Evaluation\\n    - e.g. topic classification, sentiment analysis including neutral, and product rating.\\n\\n3. Ranking Evaluation\\n    - Rank the relative quality for different outputs.\\n    - e.g. ranking search results, ranking product recommendations, and ranking news articles.\\n\\n4. Numerical Evaluation\\n    - Assigns a quantitative score to model output.\\n    - e.g. BLEU, ROUGE, METEOR, perplexity, and F1 score.\\n\\n5. Text Evaluation\\n    - Evaluation of the text by human.\\n\\n6. Multi-task Evaluation\\n    - Mixture of the above methods.\\n\\nThe choice of evaluation method depends on the specific task and the goals of the evaluation. Below are some examples:\\n\\n1. Lexical Similarity\\n    - Measure the similarity between the model\'s output and reference text, based on word overlap, sequence of words, or semantic similarity.\\n    - e.g. BLEU focuses on n-gram overlap, ROUGE focuses on recall, and METEOR focuses on both precision and recall.\\n\\n2. Linguistic Quality\\n    - Evaluate the fluency, coherence, and grammatical correctness of the generated text.\\n    - e.g. Perplexity, BLEURT.\\n\\n3. Task-Specific Evaluation\\n    - Evaluate the performance of the model on specific tasks, such as summarization, translation, or question answering.\\n    - e.g. BLEU for translation, and ROUGE for summarization.\\n\\n4. Safety and fairness\\n    - Evaluate the model\'s output for safety and fairness, including bias detection and harmful content detection.\\n    - e.g. toxicity detection, hate speech detection, and bias detection or even human evaluation.\\n\\n5. Groundedness\\n    - Evaluate the factual accuracy of the model\'s output.\\n    - e.g. Fact-checking tools, knowledge-based integration and human evaluation.\\n\\n6. User-Centric Evaluation\\n    - Focus on the user experience and satisfaction with the model\'s output.\\n    - e.g. User survey.\\n\\nMoreover, there are some common evaluation paradigms:\\n\\n1. Pointwise Evaluation:\\n    - Evaluating model behavior in production.\\n    - Absolute performance of a single model.\\n    - Identifying behaviors to prioritize for tuning.\\n    - Establishing a baseline for model performance.\\n\\n2. Pairwise Evaluation:\\n    - Comparison of two models.\\n\\nEvaluation methods are not only computation based, but also be model based, using LLM as a judge to evaluate the model output (Google Auto Side by Side). In summary, the choice of evaluation method depends on the specific task and the goals of the evaluation. I may talk about more about the evaluation metrics in the future."},{"id":"ito-lamma","metadata":{"permalink":"/knowledge-base/ito-lamma","source":"@site/blog/2025-05-13-ito-lamma.md","title":"Ito\'s Lamma","description":"In very simple terms, Ito\'s lemma is a formula that allows us to compute the differential of a function of a stochastic process. In normal functions, we can use the chain rule to compute the differential of a function. However, in stochastic calculus, we need to use Ito\'s lemma.","date":"2025-05-13T00:00:00.000Z","tags":[{"inline":false,"label":"Stochastic","permalink":"/knowledge-base/tags/stochastic","description":"Stochastic Calculus"}],"readingTime":1.34,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"ito-lamma","title":"Ito\'s Lamma","authors":["hinnytsang"],"tags":["stochastic"]},"unlisted":false,"prevItem":{"title":"Generative AI Evaluation Methods","permalink":"/knowledge-base/generative-ai-evaluation-methods"},"nextItem":{"title":"Machine Learning Techniques","permalink":"/knowledge-base/ml-techniques"}},"content":"In very simple terms, Ito\'s lemma is a formula that allows us to compute the differential of a function of a stochastic process. In normal functions, we can use the chain rule to compute the differential of a function. However, in stochastic calculus, we need to use Ito\'s lemma.\\n\\n\x3c!-- truncate --\x3e\\n\\nSuppose we have a stochastic process $X_t$ that follows a stochastic differential equation (SDE).\\n\\n$$\\ndX_t = \\\\mu(X_t, t) dt + \\\\sigma(X_t, t) dW_t\\n$$\\n\\nwhere $W_t$ is a Wiener process (or Brownian motion), $\\\\mu(X_t, t)$ is the drift term, and $\\\\sigma(X_t, t)$ is the diffusion term.\\n\\nNow, let\'s say we have a function $f(X_t, t)$ (twice differentiable) that we want to differentiate with respect to time. Ito\'s lemma states that the differential of $f(X_t, t)$ is given by:\\n\\n$$\\n\\\\frac{\\\\Delta f(t)}{dt} dt\\n= \\\\frac{\\\\partial f}{\\\\partial t} dt\\n+ \\\\frac{1}{2}\\\\frac{\\\\partial^2f}{\\\\partial t^2} (dt)^2\\n+ \\\\cdots\\n$$\\n\\nand so with $x$, the total derivative of $f$ will be\\n\\n```math\\n\\\\begin{align*}\\ndf &= f_t dt + f_x dx \\\\\\\\\\n&=\\\\lim_{dx, dt\\\\rightarrow 0, 0} \\\\frac{\\\\partial f}{\\\\partial t} dt\\n+ \\\\frac{\\\\partial f}{\\\\partial x} dx\\n+ \\\\frac{1}{2} \\\\left(\\\\frac{\\\\partial^2f}{\\\\partial t^2} (dt)^2\\n+ \\\\frac{\\\\partial^2f}{\\\\partial x^2} (dx)^2 \\\\right)\\n+ \\\\cdots\\n\\\\end{align*}\\n```\\n\\nThan substitute $x = X_t$, in the limit $dt \\\\to 0$, the following terms tend to zero faster than $dt$ are:\\n\\n1. $(dt)^2$\\n\\n2. $dtdW_t$\\n\\n3. $(dx)^3$\\n\\nNoted that $(dB_t)^2 = \\\\mathcal{O}(dt)$ due to quadratic variation of a Wiener process. # TODO,\\nHance\\n\\n$$\\ndf\\n= \\\\lim_{dt \\\\to 0} \\\\left(\\\\frac{\\\\partial f}{\\\\partial t}\\n+ \\\\mu_t \\\\frac{\\\\partial f}{\\\\partial x}\\n+ \\\\frac{\\\\sigma_t^2}{2} \\\\frac{\\\\partial^2 f}{\\\\partial x^2} \\\\right) dt\\n+ \\\\sigma_t \\\\frac{\\\\partial f}{\\\\partial x} dW_t\\n$$\\n\\nThat\'s it!"},{"id":"ml-techniques","metadata":{"permalink":"/knowledge-base/ml-techniques","source":"@site/blog/2025-05-13-ml-techniques.md","title":"Machine Learning Techniques","description":"Notes to MLE interviews.","date":"2025-05-13T00:00:00.000Z","tags":[{"inline":false,"label":"Machine Learning","permalink":"/knowledge-base/tags/machine-learning","description":"Machine Learning"}],"readingTime":3.075,"hasTruncateMarker":true,"authors":[{"name":"Hinny Tsang","title":"Data Scientist @ Pollock Asset Management","url":"https://github.com/HinnyTsang","page":{"permalink":"/knowledge-base/authors/hinnytsang"},"socials":{"linkedin":"https://www.linkedin.com/in/HinnyTsang/","github":"https://github.com/HinnyTsang"},"imageURL":"https://github.com/HinnyTsang.png","key":"hinnytsang"}],"frontMatter":{"slug":"ml-techniques","title":"Machine Learning Techniques","authors":["hinnytsang"],"tags":["machine-learning"]},"unlisted":false,"prevItem":{"title":"Ito\'s Lamma","permalink":"/knowledge-base/ito-lamma"}},"content":"Notes to MLE interviews.\\n\\n\x3c!-- truncate --\x3e\\n\\n### One-Hot Encoding\\n\\nDoesn\'t work well with high cardinality categorical features, and tree-based models like XGBoost and LightGBM due to too many zeros.\\n\\n### Mean Encoding\\n\\nlet say sample is below.\\n\\n| Age | Income |\\n| --- | ------ |\\n| 18  | 60,000 |\\n| 18  | 50,000 |\\n| 18  | 40,000 |\\n| 19  | 66,000 |\\n| 19  | 51,000 |\\n| 19  | 42,000 |\\n\\nMean encoding encode age by the mean of income, i.e.\\n\\n| Age | Income | Mean Encoding |\\n| --- | ------ | ------------- |\\n| 18  | 60,000 | 50,000        |\\n| 18  | 50,000 | 50,000        |\\n| 18  | 40,000 | 50,000        |\\n| 19  | 66,000 | 53,000        |\\n| 19  | 51,000 | 53,000        |\\n| 19  | 42,000 | 53,000        |\\n\\nBe aware of label leakage. Can apply additive smoothing to make it more robust.\\n\\n### Feature Hashing\\n\\nMap to a fixed number of features. One problem is collision if hash size is too small.\\n\\n### Cross Feature\\n\\nJoin categorical features together. For example, if we have two categorical features, `A` and `B`, we can create a new feature `C` that is the concatenation of `A` and `B`. This can help capture interactions between the two features.\\n\\n### Embedding\\n\\nA way to represent categorical features as continuous vectors. This is often used in deep learning models, where we can learn the embeddings during training. Embeddings can capture complex relationships between categories and are particularly useful for high cardinality features.\\n\\n- Continuous Bag of Words (CBOW): words[t-n] to word[t-1], word[t+1] to word[t+n] to predict word[t]\\n- Skip-gram: word[t] to predict surrounding words.\\n\\n:::note\\n\\nRule of thumb: $ d = D4d = D^{1/4} $ where $D$ is the number of categories and $d$ is the dimension of the embedding.\\n\\n:::\\n\\n:::tip\\n\\nPre-trained word embeddings (ex. word2vec, word2glove, etc.) are powerful.\\n\\n:::\\n\\n- Word to vector..\\n\\n### Attention Mechanism\\n\\nGiven embedding $E_i$ for each word $w_i$,\\n\\n1. Query $Q_i = W_q E_i$ for specfic query.\\n\\n2. Key $K_i = W_k E_i$\\n\\n3. Check similarity between query and key, $S_{ij} = Q_i \\\\cdot K_j$. High similiarity means $K_i$ *attends to* $Q_j$!\\n\\n4. Normalize $S_{ij}$ by softmax to $A_i = \\\\text{softmax}(S_{i}) V$ into attention pattern.\\n    - Masking: Set all $S_{ij}$ to $-\\\\infty$ if $j < i$ to prevent attending to future words.\\n\\n5. Value $V_i = W_v E_j$ the changes to the embedding from prevous embedding.\\n\\n6. Update embedding buy sum of previous values and weighted by attention pattern, $E_i\' = \\\\sum_j A_{ij} V_j$.\\n\\n- Cross attention: $Q_i$ is from one sequence, $K_j$ and $V_j$ are from another sequence, e.g. for translation.\\n\\n- Multi-head attention: Use multiple sets of $W_q$, $W_k$, and $W_v$ to capture different aspects of the input. Then concatenate the outputs from each head.\\n   - Pros: Allows the model to focus on different parts of the input simultaneously (Parallel processing).\\n\\n\\n More layers: e.g. Attention -> Multi-layer perceptron (MLP) -> Attention -> ... in order to capture more complex relationships.\\n\\n\\n### Transformer\\n\\nSituations, predict next token given previous tokens.\\n\\nStep structures:\\n\\n1. Input embedding: Convert input tokens into continuous vectors.\\n\\n2. Positional encoding: Add positional information to the input embeddings to capture the order of tokens.\\n\\n3. Multi-head self-attention: Compute attention scores for each token with respect to all other tokens in the sequence.\\n\\n4. Feed-forward neural network: Apply a feed-forward network to each token independently.\\n\\n5. Layer normalization: Normalize the output of the feed-forward network.\\n\\n6. Residual connection: Add the input of the layer to the output to help with gradient flow.\\n\\n7. Output layer: Convert the final representations back to token probabilities."}]}}')}}]);